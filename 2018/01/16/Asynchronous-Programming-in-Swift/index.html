<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Asynchronous Programming in Swift - Uy Nguyen</title><meta description="Promise Kit, one of the best frameworks to deal with asynchronous programming in Swift  In this post, I will use these following third parties to complete the project:  Alamofire: A HTTP networking f"><meta property="og:type" content="blog"><meta property="og:title" content="Asynchronous Programming in Swift"><meta property="og:url" content=":year/:month/:day/:title/"><meta property="og:site_name" content="Uy Nguyen"><meta property="og:description" content="Promise Kit, one of the best frameworks to deal with asynchronous programming in Swift  In this post, I will use these following third parties to complete the project:  Alamofire: A HTTP networking f"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2018-01-16T14:32:45.000Z"><meta property="article:modified_time" content="2020-04-13T14:33:58.294Z"><meta property="article:author" content="Uy Nguyen"><meta property="article:tag" content="iOS"><meta property="article:tag" content="Swift"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/Post-Resources/PromiseKIT/PromiseKIT.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://uynguyen.github.io/2018/01/16/Asynchronous-Programming-in-Swift/"},"headline":"Uy Nguyen","image":["https://uynguyen.github.io/Post-Resources/PromiseKIT/PromiseKIT.png","https://uynguyen.github.io/Post-Resources/PromiseKIT/CallbackHell.png","https://uynguyen.github.io/Post-Resources/PromiseKIT/PromiseKitDemo.gif"],"datePublished":"2018-01-16T14:32:45.000Z","dateModified":"2020-04-13T14:33:58.294Z","author":{"@type":"Person","name":"Uy Nguyen"},"description":"Promise Kit, one of the best frameworks to deal with asynchronous programming in Swift  In this post, I will use these following third parties to complete the project:  Alamofire: A HTTP networking f"}</script><link rel="canonical" href="https://uynguyen.github.io/2018/01/16/Asynchronous-Programming-in-Swift/"><link rel="icon" href="/Post-Resources/UyNguyen.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-163508356-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-163508356-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-01-16T14:32:45.000Z" title="2018-01-16T14:32:45.000Z">2018-01-16</time><span class="level-item">12 minutes read (About 1812 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Asynchronous Programming in Swift</h1><div class="content"><p><img src="/Post-Resources/PromiseKIT/PromiseKIT.png" alt=""></p>
<center>Promise Kit, one of the best frameworks to deal with asynchronous programming in Swift</center>

<p>In this post, I will use these following third parties to complete the project:</p>
<ul>
<li><a href="https://github.com/Alamofire/Alamofire">Alamofire</a>: A HTTP networking framework in Swift.</li>
<li><a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a>: To process JSON data.</li>
<li><a href="https://github.com/bahlo/SwiftGif">SwiftGifOrigin</a>: An UIImage extension to display Gif files.</li>
<li><a href="https://github.com/BoltsFramework/Bolts-Swift">Bolts-Swift</a>: Was designed by Parse and Facebook, I use it to create asynchronous methods.</li>
<li><a href="https://github.com/mxcl/PromiseKit">PromiseKit</a>: A framework helps us to simplify asynchronous programming.<br /></li>
<li><a href="https://giphy.com">Giphy’s APIs</a> for searching and downloading gif images.<a id="more"></a> 
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2></li>
</ul>
<p>Asynchronous methods, (Async for short), are the methods that not immediately returning results like most method, the async methods take some time to produce results.<br>I often use callbacks to deal with asynchronous methods like scanning Bluetooth devices or retrieving some resources from the internet. In fact, callback is a bad programming technique. Callback will make our code hard to read, hard to debug and take much more time to maintain later. In the end, our code will turn into something that we call the callback hell.<br>In this post, I will create a project using one by one technique to explain why I said callback is bad.<br>Firstly, go ahead and create a project, named it as whatever you like, then install these Pod frameworks to your project. You also need to edit the <code>NSAllowsArbitraryLoads</code> key to <code>YES</code> in <code>NSAppTransportSecurity</code> dictionary in the info.plist file to specify which domains are excepted from the rules you define for App Transport Security. In our case, this is the giphy domain.</p>
<p>Allow HTTP requests for only giphy domain</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">    &lt;key&gt;NSExceptionDomains&lt;/key&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">        &lt;key&gt;api.giphy.com&lt;/key&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">            &lt;key&gt;NSExceptionAllowsInsecureHTTPLoads&lt;/key&gt;</span><br><span class="line">            &lt;<span class="literal">true</span>/&gt;</span><br><span class="line">        &lt;/dict&gt;</span><br><span class="line">    &lt;/dict&gt;</span><br><span class="line">&lt;/dict&gt;</span><br></pre></td></tr></table></figure>

<p>Or allow HTTP requests for all domains, it is not a good idea.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;</span><br><span class="line">    &lt;<span class="literal">true</span>/&gt;</span><br><span class="line">&lt;/dict&gt;</span><br></pre></td></tr></table></figure>

<p>Let’s create a class named <code>ImageLoader</code>. This class contains two methods that help us to fetch and download gif images from the Giphy server.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ImageLoader.swift</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageLoader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchImage</span><span class="params">(keyword: String)</span></span> &#123;</span><br><span class="line">        <span class="comment">// Searching images that matched keyword on Giphy server</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">downloadImage</span><span class="params">(url: URL)</span></span> &#123;</span><br><span class="line">        <span class="comment">// Download the image at url   </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-first-version-Using-callback"><a href="#The-first-version-Using-callback" class="headerlink" title="The first version: Using callback"></a>The first version: Using callback</h2><p>Firstly, we need to define two callbacks, which will be passed to the <code>fetchImage</code> and <code>downloadImage</code> methods.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">FetchImageBlock</span> = (<span class="type">URL?</span>, <span class="type">Error?</span>) -&gt; <span class="type">Void</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">DownloadImageBlock</span> = (<span class="type">URL?</span>, <span class="type">Error?</span>) -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>

<p>Then, we implement these two methods:</p>
<ul>
<li><code>fetchImage</code> takes a keyword and a callback as params, sends a request to the Giphy server to query all images that match the keyword, gets the first one and finally returns the download url via the callback.</li>
<li><code>downloadImage</code> takes an url and a callback as params, then uses the <code>Alamofire</code> framework to download the image. Finally, returning the destination url, where the image is saved, via the callback.</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchImage</span><span class="params">(keyword: String, callback: @escaping FetchImageBlock)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> endPoint = <span class="string">"http://api.giphy.com/v1/gifs/search?q=\(keyword)&amp;limit=1&amp;api_key=q4N1oD5jw3xvH2hIOkFAyHXWTTrh0D30"</span></span><br><span class="line">    <span class="keyword">let</span> headers: <span class="type">HTTPHeaders</span> = [</span><br><span class="line">        <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="type">Alamofire</span>.request(endPoint, headers: headers).responseData &#123; (response) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error = response.error &#123;</span><br><span class="line">            <span class="keyword">return</span> callback(<span class="literal">nil</span>, error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> jsonData = <span class="type">JSON</span>.<span class="keyword">init</span>(data: response.data!)</span><br><span class="line">        <span class="keyword">let</span> dataArray = jsonData[<span class="string">"data"</span>].array</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> dataArray = dataArray, dataArray.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> imagesList = dataArray[<span class="number">0</span>][<span class="string">"images"</span>]</span><br><span class="line">            <span class="keyword">let</span> downsized_large = imagesList[<span class="string">"downsized_large"</span>][<span class="string">"url"</span>].stringValue</span><br><span class="line">            <span class="keyword">return</span> callback(<span class="type">URL</span>.<span class="keyword">init</span>(string: downsized_large), <span class="literal">nil</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> callback(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadImage</span><span class="params">(url: URL, callback: @escaping DownloadImageBlock)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> destination: <span class="type">DownloadRequest</span>.<span class="type">DownloadFileDestination</span> = &#123; <span class="number">_</span>, <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> documentsURL = <span class="type">FileManager</span>.<span class="keyword">default</span>.urls(<span class="keyword">for</span>: .documentDirectory, <span class="keyword">in</span>: .userDomainMask)[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">let</span> fileURL = documentsURL.appendingPathComponent(url.lastPathComponent)</span><br><span class="line">        <span class="keyword">return</span> (fileURL, [.removePreviousFile, .createIntermediateDirectories])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Alamofire</span>.download(url, to: destination).downloadProgress(closure: &#123; (progress) <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(progress)"</span>)</span><br><span class="line">    &#125;).responseData(completionHandler: &#123; (response) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error = response.error &#123;</span><br><span class="line">            <span class="keyword">return</span> callback(<span class="literal">nil</span>, error)</span><br><span class="line">        &#125;</span><br><span class="line">        callback(response.destinationURL, <span class="literal">nil</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Inside the main view controller, let’s define a method called <code>searchImageWithKeyword</code>. This method takes a keyword as a param, then pass the param to the <code>fetchImage</code> method of an instance of the <code>ImageLoader</code> class. We also need to pass a callback to handle the results.<br>Inside the <code>fetchImage</code> callback, let’s check if there are any errors. If it is, then we stop calling the next method, <code>downloadImage</code>. Otherwise, we call the <code>downloadImage</code> of the <code>imageLoader</code> object. Then pass the url and a callback as params.<br>Inside the <code>downloadImage</code> callback, let’s check if there are any errors. If it is, then we stop calling the next one. Otherwise, we update the image view on the main view by calling the <code>updateImageAtURL</code> method.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchImageWithKeyword</span><span class="params">(keyword: String)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> imageLoader = <span class="type">ImageLoader</span>()</span><br><span class="line">    imageLoader.fetchImage(keyword: keyword, callback: &#123;downloadLink, error <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error = error &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"Error \(error)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> downloadLink = downloadLink &#123;</span><br><span class="line">                imageLoader.downloadImage(url: downloadLink, callback: &#123;downloadedURL, error <span class="keyword">in</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> error = error &#123;</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">"Error \(error)"</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> <span class="keyword">let</span> downloadedURL = downloadedURL &#123;</span><br><span class="line">                            <span class="keyword">self</span>.updateImageAtURL(url: downloadedURL)</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">"Error: downloadedURL is nil"</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"Error: downloadLink is nil"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateImageAtURL</span><span class="params">(url: URL)</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="type">Thread</span>.isMainThread <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            <span class="keyword">self</span>.updateImageAtURL(url: url)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">Data</span>.<span class="keyword">init</span>(contentsOf: url)</span><br><span class="line">        <span class="keyword">self</span>.imgImage.image = <span class="type">UIImage</span>.gif(data: data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Error \(error)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>As you can see, the <code>searchImageWithKeyword</code> is quite complex with many <code>if</code> and <code>else</code> statements inside the method. We have to check errors in many lines of codes. Imagine how complex it would be if we had more than three methods inside itself? </p>
<p><img src="/Post-Resources/PromiseKIT/CallbackHell.png" alt=""></p>
<center>A callback hell in another language, Javascript</center>

<p>Build and run the project. Enter a keyword you want to search on the Giphy server, press search button then you will see the first result.<br><img src="/Post-Resources/PromiseKIT/PromiseKitDemo.gif" width="300"></p>
<center>The async programming project</center>

<h2 id="A-better-solution-Using-Bolts"><a href="#A-better-solution-Using-Bolts" class="headerlink" title="A better solution: Using Bolts"></a>A better solution: Using Bolts</h2><p>Bolts is a framework that was designed by Parse and Facebook, I use it to create asynchronous methods, without using callback. Bolts framework lets we write code as a series of actions based on events.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchImage</span><span class="params">(keyword: String)</span></span> -&gt; <span class="type">Task</span>&lt;<span class="type">URL</span>&gt;! &#123;</span><br><span class="line">    <span class="keyword">let</span> mainTask = <span class="type">TaskCompletionSource</span>&lt;<span class="type">URL</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> endPoint = <span class="string">"http://api.giphy.com/v1/gifs/search?q=\(keyword)&amp;limit=1&amp;api_key=q4N1oD5jw3xvH2hIOkFAyHXWTTrh0D30"</span></span><br><span class="line">    <span class="keyword">let</span> headers: <span class="type">HTTPHeaders</span> = [</span><br><span class="line">        <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="type">Alamofire</span>.request(endPoint, headers: headers).responseData &#123; (response) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error = response.error &#123;</span><br><span class="line">            <span class="keyword">return</span> mainTask.<span class="keyword">set</span>(error: error)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> jsonData = <span class="type">JSON</span>.<span class="keyword">init</span>(data: response.data!)</span><br><span class="line">        <span class="keyword">let</span> dataArray = jsonData[<span class="string">"data"</span>].array</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> dataArray = dataArray, dataArray.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> imagesList = dataArray[<span class="number">0</span>][<span class="string">"images"</span>]</span><br><span class="line">            <span class="keyword">let</span> fixed_height_still = imagesList[<span class="string">"downsized_large"</span>][<span class="string">"url"</span>].stringValue</span><br><span class="line">            <span class="keyword">return</span> mainTask.<span class="keyword">set</span>(result: <span class="type">URL</span>.<span class="keyword">init</span>(string: fixed_height_still)!)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mainTask.<span class="keyword">set</span>(error: <span class="type">NSError</span>.<span class="keyword">init</span>(domain: <span class="string">"myDomain"</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> mainTask.task</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadImage</span><span class="params">(url: URL)</span></span> -&gt; <span class="type">Task</span>&lt;<span class="type">URL</span>&gt;! &#123;</span><br><span class="line">    <span class="keyword">let</span> mainTask = <span class="type">TaskCompletionSource</span>&lt;<span class="type">URL</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> destination: <span class="type">DownloadRequest</span>.<span class="type">DownloadFileDestination</span> = &#123; <span class="number">_</span>, <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> documentsURL = <span class="type">FileManager</span>.<span class="keyword">default</span>.urls(<span class="keyword">for</span>: .documentDirectory, <span class="keyword">in</span>: .userDomainMask)[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">let</span> fileURL = documentsURL.appendingPathComponent(url.lastPathComponent)</span><br><span class="line">        <span class="keyword">return</span> (fileURL, [.removePreviousFile, .createIntermediateDirectories])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Alamofire</span>.download(url, to: destination).downloadProgress(closure: &#123; (progress) <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(progress)"</span>)</span><br><span class="line">    &#125;).responseData(completionHandler: &#123; (response) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error = response.error &#123;</span><br><span class="line">            <span class="keyword">return</span> mainTask.<span class="keyword">set</span>(error: error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> destinationURL = response.destinationURL &#123;</span><br><span class="line">            <span class="keyword">return</span> mainTask.<span class="keyword">set</span>(result: destinationURL)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mainTask.<span class="keyword">set</span>(error: <span class="type">NSError</span>.<span class="keyword">init</span>(domain: <span class="string">"myDomain"</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> mainTask.task</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Let’s see how simple the <code>searchImageWithKeyword</code> would be by using Bolts.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchImageWithKeyword</span><span class="params">(keyword: String)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> imageLoader = <span class="type">ImageLoader</span>()</span><br><span class="line">    imageLoader.fetchImage(keyword: keyword).continueOnSuccessWith &#123; (linkDownload) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">        imageLoader.downloadImage(url: linkDownload).continueOnSuccessWith(continuation: &#123; (downloadedURL) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.updateImageAtURL(url: downloadedURL)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.continueOnErrorWith &#123; (error) <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Error \(error)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Build and run the project, nothing changed. But the code is more readable than the first one, isn’t it? We gather all the errors in one place, also separate error handling and success code. </p>
<h2 id="A-much-better-solution-Using-PromiseKit"><a href="#A-much-better-solution-Using-PromiseKit" class="headerlink" title="A much better solution: Using PromiseKit"></a>A much better solution: Using PromiseKit</h2><p>One thing I do not like about Bolts framework is the lack of documentation and example projects. When I first use Bolts framework, I was very hard to get used to with the APIs of the Task object.<br>At the <a href="https://uynguyen.github.io/2017/11/29/Swift-Summit-conference-in-San-Francisco-2017/">Swift Summit conference 2017</a>, there was one speaker introduced a Framework to deal with async methods, PromiseKit. After the conference, I replaced the code using Bolts framework by PromiseKit at the projects in my company. I realize my code now more readable. I think PromiseKit’s writing will be more familiar to developers than Bolts’s writing, especially those who have worked with Javascript like me.<br>An async method created by using PromiseKit returns a new generic Promise, which is the primary class provided by PromiseKit. Its constructor takes a simple execution block with two parameters:</p>
<ul>
<li>fulfill: A function to call when the desired value is ready to fulfill the promise.</li>
<li>reject: A function to call if there is an error.</li>
</ul>
<p>Let’s apply PromiseKit to our project</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchImage</span><span class="params">(keyword: String)</span></span> -&gt; <span class="type">Promise</span>&lt;<span class="type">URL</span>&gt;  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Promise</span> &#123; fullfil, reject <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> endPoint = <span class="string">"http://api.giphy.com/v1/gifs/search?q=\(keyword)&amp;limit=1&amp;api_key=q4N1oD5jw3xvH2hIOkFAyHXWTTrh0D30"</span></span><br><span class="line">        <span class="keyword">let</span> headers: <span class="type">HTTPHeaders</span> = [</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span></span><br><span class="line">        ]</span><br><span class="line">        <span class="type">Alamofire</span>.request(endPoint, headers: headers).responseData &#123; (response) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> error = response.error &#123;</span><br><span class="line">                <span class="keyword">return</span> reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> jsonData = <span class="type">JSON</span>.<span class="keyword">init</span>(data: response.data!)</span><br><span class="line">            <span class="keyword">let</span> dataArray = jsonData[<span class="string">"data"</span>].array</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> dataArray = dataArray, dataArray.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> imagesList = dataArray[<span class="number">0</span>][<span class="string">"images"</span>]</span><br><span class="line">                <span class="keyword">let</span> fixed_height_still = imagesList[<span class="string">"downsized_large"</span>][<span class="string">"url"</span>].stringValue</span><br><span class="line">                <span class="keyword">return</span> fullfil(<span class="type">URL</span>.<span class="keyword">init</span>(string: fixed_height_still)!)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> reject(<span class="type">NSError</span>.<span class="keyword">init</span>(domain: <span class="string">"myDomain"</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadImage</span><span class="params">(url: URL)</span></span> -&gt; <span class="type">Promise</span>&lt;<span class="type">URL</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Promise</span> &#123; fullfil, reject <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> destination: <span class="type">DownloadRequest</span>.<span class="type">DownloadFileDestination</span> = &#123; <span class="number">_</span>, <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> documentsURL = <span class="type">FileManager</span>.<span class="keyword">default</span>.urls(<span class="keyword">for</span>: .documentDirectory, <span class="keyword">in</span>: .userDomainMask)[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">let</span> fileURL = documentsURL.appendingPathComponent(url.lastPathComponent)</span><br><span class="line">            <span class="keyword">return</span> (fileURL, [.removePreviousFile, .createIntermediateDirectories])</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">Alamofire</span>.download(url, to: destination).downloadProgress(closure: &#123; (progress) <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"\(progress)"</span>)</span><br><span class="line">        &#125;).responseData(completionHandler: &#123; (response) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> error = response.error &#123;</span><br><span class="line">                <span class="keyword">return</span> reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> destinationURL = response.destinationURL &#123;</span><br><span class="line">                <span class="keyword">return</span> fullfil(destinationURL)</span><br><span class="line">            &#125;</span><br><span class="line">            reject(<span class="type">NSError</span>.<span class="keyword">init</span>(domain: <span class="string">"myDomain"</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And the final result, what a beautiful code! :))</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchImageWithKeyword</span><span class="params">(keyword: String)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> imageLoader = <span class="type">ImageLoader</span>()</span><br><span class="line">    firstly &#123;</span><br><span class="line">        imageLoader.fetchImage(keyword: keyword)</span><br><span class="line">    &#125;.then &#123;  downloadLink -&gt; <span class="type">Promise</span>&lt;<span class="type">URL</span>&gt; <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> imageLoader.downloadImage(url: downloadLink)</span><br><span class="line">    &#125;.then &#123;downloadedURL -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.updateImageAtURL(url: downloadedURL)</span><br><span class="line">    &#125;.<span class="keyword">catch</span> &#123; error <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Error \(error)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>A feature that I find very interesting in both frameworks, Bolts and PromiseKit, is that they allow our code run on a given thread (Main thread or background thread). This is a great feature as most of the work done in the view controller has been to update the UI. Sometimes, long-running tasks are best handled on a background thread, so as not to tie up the UI. For more details about this Thread feature, please refer to their documents: <em>#Threading</em></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Since I am working on CoreBluetooth, I often have to work with async methods. Too many callbacks make my project more difficult to understand and difficult to debug if errors occur. <code>Promise</code> make my code become a more beautiful girl ;).<br>You can download the fully finished sample project <a href="https://github.com/uynguyen/Asynchronous-In-Swift">here</a>.<br>Feel free to leave out your comments on my post.</p>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/iOS/">iOS</a><a class="link-muted mr-2" rel="tag" href="/tags/Swift/">Swift</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5e9474199d6bcc0012d5bba6&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://ko-fi.com/uynguyen" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button is-warning donate" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="uynguyen.itus@gmail.com"><input type="hidden" name="currency_code" value="USD"></form></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/02/21/Play-Central-And-Peripheral-Roles-With-CoreBluetooth/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Play Central And Peripheral Roles With CoreBluetooth</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/01/04/Grand-Central-Dispatch-in-Swift/"><span class="level-item">Grand Central Dispatch in Swift</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://uynguyen.github.io/2018/01/16/Asynchronous-Programming-in-Swift/';
            this.page.identifier = '2018/01/16/Asynchronous-Programming-in-Swift/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'uynguyen-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen"></figure><p class="title is-size-4 is-block line-height-inherit">Uy Nguyen</p><p class="is-size-6 is-block">Software engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Vietnam</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">22</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/uynguyen" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/uynguyen"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/UyNguyen505"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://www.linkedin.com/in/uynguyen505"><i class="fab fa-linkedin"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://uynguyen.github.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Uy Nguyen</span></span><span class="level-right"><span class="level-item tag">uynguyen.github.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-14T14:25:25.000Z">2020-04-14</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/14/Beta-Test-and-TestFlight/">Beta Test and TestFlight</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-02-26T15:05:30.000Z">2020-02-26</time></p><p class="title is-6"><a class="link-muted" href="/2020/02/26/Review-book-Swift-Apprentice-Raywenderlich/">Review book: Swift Apprentice - Raywenderlich</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-01-30T10:33:16.000Z">2020-01-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/01/30/iOS-Mix-and-Match/">iOS: Mix and Match</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2019-12-11T14:28:10.000Z">2019-12-11</time></p><p class="title is-6"><a class="link-muted" href="/2019/12/11/Integrate-Google-Sign-In-on-MacOS-App-in-Swift/">Integrate Google Sign In on MacOS App in Swift</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2019-09-02T16:07:07.000Z">2019-09-02</time></p><p class="title is-6"><a class="link-muted" href="/2019/09/02/Drag-and-Drop/">Drag and Drop</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/07/"><span class="level-start"><span class="level-item">July 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/06/"><span class="level-start"><span class="level-item">June 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cocoa/"><span class="tag">Cocoa</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Concurrency/"><span class="tag">Concurrency</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Conference/"><span class="tag">Conference</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Core-Data/"><span class="tag">Core Data</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CoreBluetooh/"><span class="tag">CoreBluetooh</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CrossPlatform/"><span class="tag">CrossPlatform</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Design-Patterns/"><span class="tag">Design Patterns</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DispatchQueue/"><span class="tag">DispatchQueue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Memory-management/"><span class="tag">Memory management</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Objective-C/"><span class="tag">Objective-C</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReactNative/"><span class="tag">ReactNative</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Architecture/"><span class="tag">Software Architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UML/"><span class="tag">UML</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vendor/"><span class="tag">Vendor</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/books/"><span class="tag">books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iBeacon/"><span class="tag">iBeacon</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/study/"><span class="tag">study</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a><p class="size-small"><span>&copy; Uy Nguyen</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://uynguyen.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>