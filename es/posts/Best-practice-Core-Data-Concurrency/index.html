<!doctype html>
<html lang="es"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Mejores practicas: Concurrencia en Core Data - Uy Nguyen</title><meta description="Algunas aplicaciones pueden sobrevivir sin ningun almacenamiento de datos. La mayoria de las otras aplicaciones utiles, sin embargo, guardan algun estado como configuraciones de usuario, perfil de usu"><meta property="og:type" content="blog"><meta property="og:title" content="Mejores practicas: Concurrencia en Core Data"><meta property="og:url" content=":year/:month/:day/:title/"><meta property="og:site_name" content="Uy Nguyen"><meta property="og:description" content="Algunas aplicaciones pueden sobrevivir sin ningun almacenamiento de datos. La mayoria de las otras aplicaciones utiles, sin embargo, guardan algun estado como configuraciones de usuario, perfil de usu"><meta property="og:locale" content="es_ES"><meta property="article:published_time" content="2019-09-01T03:13:01.000Z"><meta property="article:modified_time" content="2026-01-26T06:49:48.799Z"><meta property="article:author" content="Uy Nguyen"><meta property="article:tag" content="Core Data"><meta property="article:tag" content="iOS"><meta property="article:tag" content="Concurrency"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/Post-Resources/CoreDataConcurrency/banner.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://uynguyen.github.io/es/posts/Best-practice-Core-Data-Concurrency/index.html"},"headline":"Uy Nguyen","image":["https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/banner.png","https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/CoreDataStack.png","https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/CoreDataCrash_01.png","https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/CoreDataCrash_02.png","https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/Simulate_Crash.png","https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/CoreData-MultipleContext.png"],"datePublished":"2019-09-01T03:13:01.000Z","dateModified":"2026-01-26T06:49:48.799Z","author":{"@type":"Person","name":"Uy Nguyen"},"description":"Algunas aplicaciones pueden sobrevivir sin ningun almacenamiento de datos. La mayoria de las otras aplicaciones utiles, sin embargo, guardan algun estado como configuraciones de usuario, perfil de usu"}</script><link rel="canonical" href="https://uynguyen.github.io/es/posts/Best-practice-Core-Data-Concurrency/index.html"><link rel="icon" href="/Post-Resources/UyNguyen.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><meta property="og:image" content="/Post-Resources/CoreDataConcurrency/banner.png"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-163508356-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-163508356-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><div class="navbar-item has-dropdown is-hoverable language-switcher"><a class="navbar-link" title="Idioma"><i class="fas fa-globe"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="/2019/09/01/Best-practice-Core-Data-Concurrency/">English</a><a class="navbar-item" href="/vi/posts/Best-practice-Core-Data-Concurrency/">Ti·∫øng Vi·ªát</a><a class="navbar-item is-active" href="/es/posts/Best-practice-Core-Data-Concurrency/">Espa√±ol</a></div></div><a class="navbar-item search" title="Buscar" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"></div></div><h1 class="title is-3 is-size-4-mobile">Mejores practicas: Concurrencia en Core Data</h1><div class="content"><p><img src="/Post-Resources/CoreDataConcurrency/banner.png" alt="" title="Core data stack"><br>Algunas aplicaciones pueden sobrevivir sin ningun almacenamiento de datos. La mayoria de las otras aplicaciones utiles, sin embargo, guardan algun estado como configuraciones de usuario, perfil de usuario, objetivos, etc. En iOS, Apple proporciona Core Data como un framework para persistir tus datos valiosos. Una cosa a tener en cuenta es que aunque CoreData puede almacenar datos en una base de datos relacional, en realidad no es un motor de base de datos.<br>En este tutorial, compartire contigo una mala experiencia que enfrente cuando trabaje con Core Data. Esperemos que despues de leer lo que comparto, evites enfrentar el mismo problema en tus proyectos.<br>Comencemos.</p>
<a id="more"></a>
<h1 id="Tres-componentes-principales-del-stack-de-Core-Data"><a href="#Tres-componentes-principales-del-stack-de-Core-Data" class="headerlink" title="Tres componentes principales del stack de Core Data"></a>Tres componentes principales del stack de Core Data</h1><p>Primero que nada, listare los tres componentes principales del stack de Core Data, puede que estes o no familiarizado con estos terminos pero es mejor obtener un entendimiento profundo del stack de Core Data antes de profundizar mas.<br>La API de Core Data, tambien llamada el stack, consiste en tres componentes principales:</p>
<ul>
<li><em>NSManagedObjectModel</em>: El modelo de datos describe una entidad (objeto).</li>
<li><em>NSManagedObjectContext</em>: Los objetos cuando se obtienen del almacenamiento persistente se colocan en el contexto de objeto administrado. Realiza validaciones y mantiene un seguimiento de los cambios realizados a los atributos del objeto para que las operaciones de deshacer y rehacer puedan aplicarse, si es necesario. En un contexto dado, un objeto administrado proporciona una representacion de un registro en un almacen persistente. Dependiendo de la situacion, puede haber multiples contextos, cada uno conteniendo un objeto administrado separado representando ese registro. Todos los objetos administrados estan registrados con un contexto de objeto administrado.</li>
<li><em>NSPersistentStoreCoordinator</em>: <code>NSManagedObjectContext</code> no trabaja directamente con <code>NSPersistentStore</code> para almacenar y recuperar datos, sino que NSPersistentStoreCoordinator lo hara. Los roles principales de <code>NSPersistentStoreCoordinator</code> son gestionar el estado del contexto de objeto administrado y serializar llamadas a <code>NSPersistentStore</code> para evitar redundancia.</li>
</ul>
<p>Puedes encontrar los roles principales de cada componente en la siguiente imagen<br><img src="/Post-Resources/CoreDataConcurrency/CoreDataStack.png" alt="" title="Core data stack"></p>
<p>Tenemos suficiente conocimiento de Core Data y sus diferentes componentes. Ahora, avancemos a la seccion principal.</p>
<h1 id="Core-Data-soporta-concurrencia"><a href="#Core-Data-soporta-concurrencia" class="headerlink" title="Core Data soporta concurrencia"></a>Core Data soporta concurrencia</h1><p>Core Data soporta multi-threading en una aplicacion, lo que significa que mas de un hilo puede ejecutarse en paralelo para aumentar el rendimiento. Incluso algunas tareas pueden realizarse en segundo plano usando un hilo separado.<br>Como podrias saber, cuando trabajas con CoreData, hay dos formas de definir un contexto de objeto administrado: <code>NSMainQueueConcurrencyType</code> y <code>NSPrivateQueueConcurrencyType</code>. Depende de nosotros decidir que tipo de MOC debemos crear en nuestras aplicaciones. Principalmente trabajaremos en el principal, pero para evitar hacer procesamiento de datos en la cola principal, ya que podria afectar la experiencia del usuario al hacer tareas pesadas en el hilo principal, a veces necesitamos crear un contexto de cola privada y realizar esas tareas pesadas en este contexto privado.<br>La concurrencia absolutamente hace la aplicacion mas efectiva ya que las tareas ahora pueden hacerse en paralelo, pero hay algunas reglas estrictas definidas por Apple que debemos seguir, de lo contrario enfrentaremos algunos comportamientos inesperados, incluyendo crashes y perdida de datos.</p>
<ul>
<li><em>Regla 1</em>: Los contextos de objetos administrados estan vinculados al hilo con el que estan asociados en la declaracion. La primera regla establece que no uses el contexto de cola principal en un hilo en segundo plano. La mayoria del tiempo, no hay falla en absoluto si violamos la regla. Sin embargo, cuando llega a produccion, pronto enfrentaras crashes en tu dashboard, resultando en malas experiencias de usuario y mas importante aun, llevando a perdida de datos.</li>
<li><em>Regla 2</em>: Los objetos administrados recuperados de un contexto estan vinculados a la misma cola con la que el contexto esta asociado. Eso significa no pasar ninguno de los objetos recuperados del contexto principal al privado y viceversa. Violar esta regla llevara al mismo resultado que la regla 1.</li>
</ul>
<h1 id="Crash-crash-crash"><a href="#Crash-crash-crash" class="headerlink" title="Crash, crash, crash!"></a>Crash, crash, crash!</h1><p>Ha sido la primera vez que uso CoreData para almacenar datos valiosos de usuarios en nuestra aplicacion. Por un lado, no tome la concurrencia de Core Data en serio en ese momento. Por otro lado, no sabia que hay algunas reglas estrictas cuando se trabaja con concurrencia en Core Data. Como resultado, cuando la aplicacion llego a produccion, el numero de crashes habia sido reportado al dashboard de monitoreo.<br><img src="/Post-Resources/CoreDataConcurrency/CoreDataCrash_01.png" alt="" title="Core data crash"></p>
<p><img src="/Post-Resources/CoreDataConcurrency/CoreDataCrash_02.png" alt="" title="Core data crash"></p>
<p>En ese momento, no tenia idea de como venian. No podia reproducir estos problemas para encontrar la causa raiz. Adicionalmente, el crash reportado por Firebase no tenia suficiente informacion para una investigacion. Intente revisar el flujo de mi aplicacion, buscando en StackOverflow y luego leyendo profundamente el documento de Apple de Core Data. Finalmente, la causa raiz viene de acceder a Core Data desde multiples hilos.</p>
<p>Como estoy trabajando con Core Bluetooth, el punto clave es que Core Bluetooth despacha eventos de Bluetooth en el hilo principal por defecto. Sin embargo, configure la cola de Bluetooth a una cola en segundo plano para evitar bloquear la cola de UI. Aqui vienen los crashes ya que Core Data no permite acceder a <code>NSManagedObject</code> entre diferentes colas estrictamente.</p>
<p>Para simular este problema, cree un bucle sin parar para ejecutar acciones de insercion y eliminacion en una cola en segundo plano continuamente. El siguiente codigo ilustra como realice la prueba.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.doSomething()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.managedContext?.insert(person: <span class="keyword">self</span>.person)</span><br><span class="line">    <span class="keyword">self</span>.managedContext?.delete(person: <span class="keyword">self</span>.person)</span><br><span class="line">    <span class="type">DispatchQueue</span>.global(qos: .background).asyncAfter(deadline: .now() + <span class="number">0.1</span>, execute: &#123;</span><br><span class="line">        <span class="keyword">self</span>.doSomething()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Tarde o temprano, el crash llegara a nosotros.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>-<span class="number">10</span>-<span class="number">13</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">55.497690</span>+<span class="number">0700</span> <span class="type">CoreData</span>-<span class="type">Concurrency</span>[<span class="number">90636</span>:<span class="number">1151728</span>] [error] error: <span class="type">Serious</span> application error.  <span class="type">Exception</span> was caught during <span class="type">Core</span> <span class="type">Data</span> change processing. <span class="type">This</span> <span class="keyword">is</span> usually a bug within an observer of <span class="type">NSManagedObjectContextObjectsDidChangeNotification</span>.  -[__NSCFSet addObject:]: attempt to insert <span class="literal">nil</span> with userInfo (null)</span><br><span class="line"><span class="type">CoreData</span>: error: <span class="type">Serious</span> application error.  <span class="type">Exception</span> was caught during <span class="type">Core</span> <span class="type">Data</span> change processing.  <span class="type">This</span> <span class="keyword">is</span> usually a bug within an observer of <span class="type">NSManagedObjectContextObjectsDidChangeNotification</span>.  -[__NSCFSet addObject:]: attempt to insert <span class="literal">nil</span> with userInfo (null)</span><br><span class="line"><span class="number">2019</span>-<span class="number">10</span>-<span class="number">13</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">55.569306</span>+<span class="number">0700</span> <span class="type">CoreData</span>-<span class="type">Concurrency</span>[<span class="number">90636</span>:<span class="number">1151728</span>] *** <span class="type">Terminating</span> app due to uncaught exception '<span class="type">NSInvalidArgumentException'</span>, reason: '-[__NSCFSet addObject:]: attempt to insert <span class="literal">nil</span>'</span><br></pre></td></tr></table></figure>

<p><img src="/Post-Resources/CoreDataConcurrency/Simulate_Crash.png" alt="" title="Core data crash"></p>
<p>Aqui hay algunas respuestas de la comunidad que puedes encontrar en Stackoverflow:<br><a href="https://stackoverflow.com/questions/36402366/core-data-crash-attempt-to-insert-nil-with-userinfo-null">https://stackoverflow.com/questions/36402366/core-data-crash-attempt-to-insert-nil-with-userinfo-null</a><br><a href="https://stackoverflow.com/questions/55517083/ios-core-data-serious-application-error-attempt-to-insert-nil-in-less-than">https://stackoverflow.com/questions/55517083/ios-core-data-serious-application-error-attempt-to-insert-nil-in-less-than</a></p>
<h1 id="Evitar-crashes"><a href="#Evitar-crashes" class="headerlink" title="Evitar crashes"></a>Evitar crashes</h1><p>Para evitar el crash, hay dos tecnicas que podemos aplicar, ambas aseguran que no violemos las reglas de confinamiento de concurrencia.</p>
<h2 id="1"><a href="#1" class="headerlink" title="#1"></a>#1</h2><p>La primera es asegurar que el <code>managedObjectContext</code> se ejecute en la cola con la que esta asociado en la inicializacion, que es la cola principal en este caso.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.managedContext?.insert(person: <span class="keyword">self</span>.person)</span><br><span class="line">    <span class="keyword">self</span>.managedContext?.delete(person: <span class="keyword">self</span>.person)</span><br><span class="line">    <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() + <span class="number">0.1</span>, execute: &#123; <span class="comment">// Dispatch to main queue</span></span><br><span class="line">        <span class="keyword">self</span>.doSomething()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>En caso de que por alguna razon, no podamos ejecutar las acciones en la cola principal (por ejemplo, importar datos enormes al disco) podemos crear multiples contextos para resolver este problema. Ve a #2.</p>
<h2 id="2"><a href="#2" class="headerlink" title="#2"></a>#2</h2><p>Usando la tecnica de <code>Core Data multiple context</code>.<br>Un contexto de objeto administrado (MOC) hijo no mantiene una referencia al coordinador de almacen persistente (PSC). En cambio, mantiene una referencia a otro (MOC) como su padre. Cada vez que un hijo realiza <code>saveContext</code>, los cambios seran enviados a su padre, y seguiran enviandose a otros padres (si los hay). Solo cuando el MOC padre raiz realiza <code>saveContext</code>, los cambios se guardan en el PSC.</p>
<p><img src="/Post-Resources/CoreDataConcurrency/CoreData-MultipleContext.png" alt="" title="Core data multiple context"></p>
<p>Creemos un MOC privado dentro de nuestra clase <code>PersonManagedObject</code>.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> privateMOC = <span class="type">NSManagedObjectContext</span>(concurrencyType: .privateQueueConcurrencyType)</span><br></pre></td></tr></table></figure>

<p>Luego establece su padre como el MOC principal.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>?() &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    privateMOC.parent = <span class="keyword">self</span>.managedObjectContext</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>De ahora en adelante, todas las acciones se realizaran en este <code>privateMOC</code>. El metodo <code>performAndWait</code> bloquea al llamador de retornar hasta que el bloque se ejecute.<br><code>El metodo perform(_:) retorna inmediatamente y el contexto ejecuta los metodos del bloque en su propio hilo. Con el metodo performAndWait(_:), el contexto todavia ejecuta los metodos del bloque en su propio hilo, pero el metodo no retorna hasta que el bloque se ejecute.</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(person: Person)</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// Some code are obmitted</span></span><br><span class="line">    <span class="keyword">self</span>.privateMOC.performAndWait &#123;</span><br><span class="line">        <span class="keyword">self</span>.privateMOC.insert(object)</span><br><span class="line">        synchronize()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>No olvides llamar al metodo <code>saveContext</code> del contexto padre para guardar los cambios en el PSC.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">synchronize</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> <span class="keyword">self</span>.privateMOC.save() <span class="comment">// We call save on the private context, which moves all of the changes into the main queue context without blocking the main queue.</span></span><br><span class="line">        <span class="keyword">self</span>.managedObjectContext.performAndWait &#123;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> <span class="keyword">self</span>.managedObjectContext.save()</span><br><span class="line">            &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"Could not synchonize data. \(error), \(error.localizedDescription)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Could not synchonize data. \(error), \(error.localizedDescription)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Despues de modificar el codigo usando #1 o #2, ejecute el programa de nuevo por un largo tiempo pero no hubo mas crashes!</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Core Data es un framework muy util y ciertamente es indispensable en la mayoria de las aplicaciones moviles hoy en dia. Para evitar las mismas malas situaciones por las que acabo de pasar, asegurate de profundizar en sus componentes antes de comenzar tu codigo, especialmente la concurrencia de Core Data.<br>Puedes encontrar mi proyecto completado en <a href="https://github.com/uynguyen/Core_Data_Concurrency">Github - Core Data Concurrency</a><br>Gracias por leer.</p>
<h1 id="Referencias"><a href="#Referencias" class="headerlink" title="Referencias"></a>Referencias</h1><p>[1] B.M. Harwani - Core Data iOS Essentials-Packt Publishing (2011)<br>[2] <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/Concurrency.html">Core Data, Multithreading, and the Main Thread</a><br>[3] [Multiple context CoreData] <a href="https://www.cocoanetics.com/2012/07/multi-context-coredata/">https://www.cocoanetics.com/2012/07/multi-context-coredata/</a></p>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5e9474199d6bcc0012d5bba6&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://ko-fi.com/uynguyen" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button is-warning donate" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="uynguyen.itus@gmail.com"><input type="hidden" name="currency_code" value="USD"></form></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5">Comentarios</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://uynguyen.github.io/es/posts/Best-practice-Core-Data-Concurrency/index.html';
            this.page.identifier = 'es/posts/Best-practice-Core-Data-Concurrency/index.html';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'uynguyen-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen"></figure><p class="title is-size-4 is-block line-height-inherit">Uy Nguyen</p><p class="is-size-6 is-block">Software engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-envelope mr-1"></i><span>uynguyen.itus@gmail.com</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Entradas</p><a href="/archives"><p class="title">58</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categor√≠as</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Etiquetas</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-rounded" style="background-color:#f14668e3;color:white;font-weight:bold;" href="https://ko-fi.com/uynguyen" target="_blank" rel="noopener">if üëç then Buy me a Coffee</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/uynguyen"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://www.linkedin.com/in/uynguyen505"><i class="fab fa-linkedin"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Enlaces</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://uynguyen.github.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Uy Nguyen</span></span><span class="level-right"><span class="level-item tag">uynguyen.github.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recientes</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2025-04-02T11:03:38.000Z">2025-04-02</time></p><p class="title is-6"><a class="link-muted" href="/2025/04/02/Bluetooth-security-Implement-authentication/">Securing Bluetooth Communication: Implementing Authentication and Encryption Flows</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-11-03T03:33:53.000Z">2024-11-03</time></p><p class="title is-6"><a class="link-muted" href="/2024/11/03/iOS-18-What-s-news-in-CoreBluetooth/">iOS 18: What&#039;s news in CoreBluetooth?</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-31T03:38:32.000Z">2024-08-31</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/31/Bluetooth-security-Pairing-and-Bonding/">Bluetooth security: Pairing and Bonding</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-04T05:10:39.000Z">2024-08-04</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/04/Android-Bluetooth-A-Pitfall/">Android Bluetooth: A Pitfall</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-06-30T03:48:09.000Z">2024-06-30</time></p><p class="title is-6"><a class="link-muted" href="/2024/06/30/Best-practice-iOS-vs-Android-Bluetooth/">Best practice: iOS vs Android Bluetooth</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Etiquetas</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Appclip/"><span class="tag">Appclip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bluetooth/"><span class="tag">Bluetooth</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Books/"><span class="tag">Books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cocoa/"><span class="tag">Cocoa</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Concurrency/"><span class="tag">Concurrency</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Conference/"><span class="tag">Conference</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Core-Data/"><span class="tag">Core Data</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CoreBluetooh/"><span class="tag">CoreBluetooh</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CrossPlatform/"><span class="tag">CrossPlatform</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Design-Patterns/"><span class="tag">Design Patterns</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DispatchQueue/"><span class="tag">DispatchQueue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Memory-management/"><span class="tag">Memory management</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Notification/"><span class="tag">Notification</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Objective-C/"><span class="tag">Objective-C</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Operations/"><span class="tag">Operations</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReactNative/"><span class="tag">ReactNative</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Architecture/"><span class="tag">Software Architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI/"><span class="tag">UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UIStackView/"><span class="tag">UIStackView</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UML/"><span class="tag">UML</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vendor/"><span class="tag">Vendor</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WatchOS/"><span class="tag">WatchOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web-Bluetooth/"><span class="tag">Web Bluetooth</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/books/"><span class="tag">books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iBeacon/"><span class="tag">iBeacon</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/study/"><span class="tag">study</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a><p class="size-small"><span>&copy; Uy Nguyen</span>¬†¬†Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>¬†&amp;¬†<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("es");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://uynguyen.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Teclea algo..."></div><a class="searchbox-close" href="javascript:;">√ó</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Teclea algo...","untitled":"(Untitled)","posts":"Entradas","pages":"Pages","categories":"Categor√≠as","tags":"Etiquetas"});
        });</script></body></html>