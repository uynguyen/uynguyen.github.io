<!doctype html>
<html lang="es"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Concurrencia Avanzada en iOS: Operations [1] - Uy Nguyen</title><meta description="Hay dos tecnicas para manejar la Concurrencia en iOS: GCD - Grand Central Dispatch y Operations. La mayoria del tiempo, GCD proporciona la mayoria de las capacidades de concurrencia que necesitas. Sin"><meta property="og:type" content="blog"><meta property="og:title" content="Concurrencia Avanzada en iOS: Operations [1]"><meta property="og:url" content=":year/:month/:day/:title/"><meta property="og:site_name" content="Uy Nguyen"><meta property="og:description" content="Hay dos tecnicas para manejar la Concurrencia en iOS: GCD - Grand Central Dispatch y Operations. La mayoria del tiempo, GCD proporciona la mayoria de las capacidades de concurrencia que necesitas. Sin"><meta property="og:locale" content="es_ES"><meta property="article:published_time" content="2020-05-16T13:54:36.000Z"><meta property="article:modified_time" content="2026-01-26T06:49:48.803Z"><meta property="article:author" content="Uy Nguyen"><meta property="article:tag" content="iOS"><meta property="article:tag" content="Concurrency"><meta property="article:tag" content="Operations"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/Post-Resources/Operations/operations.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://uynguyen.github.io/es/posts/iOS-Concurrency-Operations/index.html"},"headline":"Uy Nguyen","image":["https://uynguyen.github.io/Post-Resources/Operations/operations.png","https://uynguyen.github.io/Post-Resources/Operations/lagy.gif"],"datePublished":"2020-05-16T13:54:36.000Z","dateModified":"2026-01-26T06:49:48.803Z","author":{"@type":"Person","name":"Uy Nguyen"},"description":"Hay dos tecnicas para manejar la Concurrencia en iOS: GCD - Grand Central Dispatch y Operations. La mayoria del tiempo, GCD proporciona la mayoria de las capacidades de concurrencia que necesitas. Sin"}</script><link rel="canonical" href="https://uynguyen.github.io/es/posts/iOS-Concurrency-Operations/index.html"><link rel="icon" href="/Post-Resources/UyNguyen.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><meta property="og:image" content="/Post-Resources/Operations/operations.png"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-163508356-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-163508356-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><div class="navbar-item has-dropdown is-hoverable language-switcher is-hidden-mobile"><a class="navbar-link" title="Idioma"><i class="fas fa-globe"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="/2020/05/16/iOS-Concurrency-Operations/">English</a><a class="navbar-item" href="/vi/posts/iOS-Concurrency-Operations/">Ti·∫øng Vi·ªát</a><a class="navbar-item is-active" href="/es/posts/iOS-Concurrency-Operations/">Espa√±ol</a></div></div><a class="navbar-item search is-hidden-mobile" title="Buscar" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><div class="mobile-toolbar is-hidden-tablet"><div class="container"><div class="mobile-toolbar-content"><button class="mobile-toolbar-btn" id="mobile-lang-btn" title="Idioma"><i class="fas fa-globe"></i><span>Espa√±ol</span></button><button class="mobile-toolbar-btn search" title="Buscar"><i class="fas fa-search"></i><span>Buscar</span></button></div></div></div><div class="language-picker-overlay" id="lang-picker-overlay"><div class="language-picker-backdrop"></div><div class="language-picker-modal"><div class="language-picker-header"><span>Idioma</span><button class="language-picker-close" id="lang-picker-close"><i class="fas fa-times"></i></button></div><div class="language-picker-options"><a class="language-picker-option" href="/2020/05/16/iOS-Concurrency-Operations/"><span class="lang-name">English</span></a><a class="language-picker-option" href="/vi/posts/iOS-Concurrency-Operations/"><span class="lang-name">Ti·∫øng Vi·ªát</span></a><a class="language-picker-option is-active" href="/es/posts/iOS-Concurrency-Operations/"><span class="lang-name">Espa√±ol</span><i class="fas fa-check"></i></a></div></div></div><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"></div></div><h1 class="title is-3 is-size-4-mobile">Concurrencia Avanzada en iOS: Operations [1]</h1><div class="content"><p><img src="/Post-Resources/Operations/operations.png" alt="" title="Operations"><br>Hay dos tecnicas para manejar la Concurrencia en iOS: GCD - Grand Central Dispatch y Operations. La mayoria del tiempo, GCD proporciona la mayoria de las capacidades de concurrencia que necesitas. Sin embargo, a veces querras algunas personalizaciones avanzadas adicionales. Es hora de usar Operations. Este tutorial introducira Operations en Swift, tambien explicara cuando y por que usar Operation en lugar de GCD.<br>Cambiemos de marcha!</p>
<blockquote>
<p>Hay una gran brecha entre conocer el camino y recorrerlo.</p>
</blockquote>
<a id="more"></a>
<h2 id="Introduccion-a-Operations"><a href="#Introduccion-a-Operations" class="headerlink" title="Introduccion a Operations"></a>Introduccion a Operations</h2><p>Operation es una clase que te permite enviar un bloque de codigo que deberia ejecutarse en un hilo diferente, esta construida sobre GCD. Basicamente, tanto GCD como Operation tienen roles similares. Sin embargo, Operations tienen otros beneficios que nos dan mas control sobre la tarea.</p>
<ul>
<li><strong>Diseno OOP</strong>: como Operation es una clase de Swift, puedes crear subclases y sobrescribir sus metodos si es necesario. Sera facil de usar y reutilizar en el futuro.</li>
<li><strong>Gestion de estados</strong>: Una Operation tiene su propia maquina de estados que cambia durante su ciclo de vida. La operacion misma maneja los cambios de sus estados. No podemos modificar estos estados de un objeto.</li>
<li><strong>Dependencia entre operaciones</strong>: Si quieres iniciar una tarea despues de que otras tareas hayan terminado de ejecutarse, entonces Operation deberia ser tu eleccion. Una operacion no comenzara a ejecutarse hasta que todas las operaciones de las que depende hayan terminado exitosamente sus trabajos.</li>
<li><strong>Cancelar la tarea enviada</strong>: Al usar Operations, tenemos la capacidad de cancelar una operacion en ejecucion. Es muy util en un caso donde queremos detener operaciones que son irrelevantes en un momento determinado. Por ejemplo, para cancelar la descarga de datos cuando el usuario desplaza la tabla haciendo que algunas celdas desaparezcan.</li>
</ul>
<p>La dependencia y la capacidad de cancelar hacen que las Operations sean mucho mas controlables que GCD.</p>
<h2 id="Llevemoslo-a-la-practica"><a href="#Llevemoslo-a-la-practica" class="headerlink" title="Llevemoslo a la practica"></a>Llevemoslo a la practica</h2><p>Supongamos que estamos construyendo una aplicacion que obtendra algunas de mis publicaciones. Despues de descargar las imagenes de portada, se les aplicara un filtro simple, luego se mostraran en una table view.<br>Adelante, crea un proyecto. El proyecto simplemente contiene solo una pantalla principal con una table view que muestra publicaciones con un titulo y una imagen de portada. Para simplificar la fuente de datos, cree un archivo JSON que contiene 100 filas describiendo una publicacion con clave como titulo y valor como la URL vinculada a la imagen de portada.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="comment">// input.json</span></span><br><span class="line">    &#123;<span class="string">"Building your personal page with Hexo"</span>: <span class="string">"https://uynguyen.github.io/Post-Resources/Hexo/Cover.png"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"Beta Test and TestFlight"</span>: <span class="string">"https://uynguyen.github.io/Post-Resources/TestFlight/Cover.png"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"iOS: Mix and Match"</span>: <span class="string">"https://uynguyen.github.io/Post-Resources/MixMatch/mix-match-banner.png"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"Best practice: Core Data Concurrency"</span>: <span class="string">"https://uynguyen.github.io/Post-Resources/CoreDataConcurrency/banner.png"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"Two weeks at Fossil Group in the US"</span>: <span class="string">"https://uynguyen.github.io/Post-Resources/Fossil_Group/Fossil_Group.jpg"</span>&#125;,</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Dentro del MainViewController, leamos el archivo de entrada</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> tbPosts: <span class="type">UITableView!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> urls = [(title: <span class="type">String</span>, url: <span class="type">String</span>)]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="keyword">self</span>.setup()</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> inputUrl = <span class="type">Bundle</span>.main.url(forResource: <span class="string">"input"</span>, withExtension: <span class="string">"json"</span>)!</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">Data</span>(contentsOf: inputUrl)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> jsonDict = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.jsonObject(with: data) <span class="keyword">as</span>? [[<span class="type">String</span>: <span class="type">String</span>]] &#123;</span><br><span class="line">                <span class="keyword">self</span>.urls = jsonDict.<span class="built_in">map</span> &#123; ($<span class="number">0</span>.first!.key, $<span class="number">0</span>.first!.value) &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>Usando una funcion simple de CoreImage, el metodo <code>grayScale(input:)</code> transformara una UIImage a una imagen en blanco y negro con el filtro Tonal</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">grayScale</span><span class="params">(input: UIImage)</span></span> -&gt; <span class="type">UIImage?</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="type">CIContext</span>(options: <span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">var</span> inputImage = <span class="type">CIImage</span>(image: input)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> filters = inputImage!.autoAdjustmentFilters()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">filter</span>: <span class="type">CIFilter</span> <span class="keyword">in</span> filters &#123;</span><br><span class="line">        <span class="built_in">filter</span>.setValue(inputImage, forKey: kCIInputImageKey)</span><br><span class="line">        inputImage =  <span class="built_in">filter</span>.outputImage</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> cgImage = context.createCGImage(inputImage!, from: inputImage!.extent)</span><br><span class="line">    <span class="keyword">let</span> currentFilter = <span class="type">CIFilter</span>(name: <span class="string">"CIPhotoEffectTonal"</span>)</span><br><span class="line">    currentFilter!.setValue(<span class="type">CIImage</span>(image: <span class="type">UIImage</span>(cgImage: cgImage!)), forKey: kCIInputImageKey)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> output = currentFilter!.outputImage</span><br><span class="line">    <span class="keyword">let</span> cgimg = context.createCGImage(output!, from: output!.extent)</span><br><span class="line">    <span class="keyword">return</span> <span class="type">UIImage</span>(cgImage: cgimg!)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Es hora de configurar la table view, usamos URLSession para descargar la imagen desde la URL de entrada, luego mostrarla en la celda despues de descargarla exitosamente.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ViewController</span>: <span class="title">UITableViewDataSource</span> </span>&#123;</span><br><span class="line">    <span class="comment">// The rest omitted</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> cell = tableView.dequeueReusableCell(withIdentifier: <span class="string">"CellId"</span>, <span class="keyword">for</span>: indexPath) <span class="keyword">as</span>! <span class="type">PostTableViewCell</span></span><br><span class="line">        <span class="keyword">let</span> input = urls[indexPath.row]</span><br><span class="line"></span><br><span class="line">        <span class="type">URLSession</span>.shared.dataTask(with: <span class="type">URL</span>(string: input.url)!, completionHandler: &#123; (data, res, error) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> error == <span class="literal">nil</span>,</span><br><span class="line">                <span class="keyword">let</span> data = data,</span><br><span class="line">                <span class="keyword">let</span> image = <span class="type">UIImage</span>(data: data) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                cell.lblPostTitle.text = input.title</span><br><span class="line">                cell.imgPostImage.image = <span class="keyword">self</span>.grayScale(input: image)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).resume()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Compila y ejecuta el proyecto, deberias ver las imagenes aparecer en la lista. Intentemos desplazar la tabla. Puedes sentir el lag?<br>Podrias notar de donde viene el problema. Para configurar una celda, primero descargamos la imagen de internet, luego aplicamos un filtro Tonal a la imagen. Estas dos acciones se estan realizando en el hilo principal, poniendo demasiada presion en el hilo que solo deberia usarse para la interaccion del usuario.</p>
<div style="text-align:center">

<p><img src="/Post-Resources/Operations/lagy.gif" alt="" title="Lagy"></p>
</div>

<h2 id="Usando-GCD"><a href="#Usando-GCD" class="headerlink" title="Usando GCD"></a>Usando GCD</h2><p>Podemos despachar el codigo de descarga y filtrado de imagen a otra cola separada</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DispatchQueue</span>.global(qos: .background).async &#123;</span><br><span class="line">    <span class="type">URLSession</span>.shared.dataTask(with: <span class="type">URL</span>(string: input.url)!, completionHandler: &#123; (data, res, error) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">guard</span> error == <span class="literal">nil</span>,</span><br><span class="line">            <span class="keyword">let</span> data = data,</span><br><span class="line">            <span class="keyword">let</span> image = <span class="type">UIImage</span>(data: data) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> filteredImage = <span class="keyword">self</span>.grayScale(input: image)</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            cell.lblPostTitle.text = input.title</span><br><span class="line">            cell.imgPostImage.image = filteredImage</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).resume()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Al ejecutar el codigo en una cola de fondo, descargamos trabajo de la cola principal y hacemos la UI mucho mas receptiva.<br>Recompila el proyecto, veras las diferencias.<br>Aunque resolvemos el problema de interaccion del usuario, el rendimiento de la app todavia no esta optimizado.<br>Que se puede hacer para mejorar esto?<br>A medida que el usuario desplaza la tabla, las celdas van y vienen. No tiene sentido continuar descargando y procesando una imagen de una celda invisible. Es mejor cancelar el bloque de codigo para mejorar el rendimiento y reducir el consumo de bateria de la app. Pero como podemos cancelar una tarea que se esta ejecutando en GCD?<br>Aqui es donde entra Operation.</p>
<h2 id="Cambiemos-a-Operation"><a href="#Cambiemos-a-Operation" class="headerlink" title="Cambiemos a Operation"></a>Cambiemos a Operation</h2><p>Dividamos la tarea de configurar una celda de table view en dos tareas: una es descargar la imagen y otra es aplicar el filtro.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DownloadImageOperation</span>: <span class="title">Operation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url: <span class="type">URL</span></span><br><span class="line">    <span class="keyword">var</span> outputImage: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(url: <span class="type">URL</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.url = url</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> !isCancelled <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">URLSession</span>.shared.dataTask(with: <span class="keyword">self</span>.url, completionHandler: &#123; (data, res, error) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> error == <span class="literal">nil</span>,</span><br><span class="line">                <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.outputImage = <span class="type">UIImage</span>(data: data)</span><br><span class="line">        &#125;).resume()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageFilterOperation</span>: <span class="title">Operation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="type">CIContext</span>(options: <span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">var</span> processedImage: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">grayScale</span><span class="params">(input: UIImage)</span></span> -&gt; <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> inputImage = <span class="type">CIImage</span>(image: input)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> filters = inputImage!.autoAdjustmentFilters()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">filter</span>: <span class="type">CIFilter</span> <span class="keyword">in</span> filters &#123;</span><br><span class="line">            <span class="built_in">filter</span>.setValue(inputImage, forKey: kCIInputImageKey)</span><br><span class="line">            inputImage =  <span class="built_in">filter</span>.outputImage</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> cgImage = context.createCGImage(inputImage!, from: inputImage!.extent)</span><br><span class="line">        <span class="keyword">let</span> currentFilter = <span class="type">CIFilter</span>(name: <span class="string">"CIPhotoEffectTonal"</span>)</span><br><span class="line">        currentFilter!.setValue(<span class="type">CIImage</span>(image: <span class="type">UIImage</span>(cgImage: cgImage!)), forKey: kCIInputImageKey)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> output = currentFilter!.outputImage</span><br><span class="line">        <span class="keyword">let</span> cgimg = context.createCGImage(output!, from: output!.extent)</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIImage</span>(cgImage: cgimg!)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> !isCancelled <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> dependencyImage = <span class="keyword">self</span>.dependencies</span><br><span class="line">            .compactMap &#123; $<span class="number">0</span> <span class="keyword">as</span>? <span class="type">DownloadImageOperation</span> &#125;</span><br><span class="line">            .first</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> image = dependencyImage?.outputImage &#123;</span><br><span class="line">            <span class="keyword">guard</span> !isCancelled <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">            <span class="keyword">self</span>.processedImage = <span class="keyword">self</span>.grayScale(input: image)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Para usar Operation, simplemente creamos una subclase de la clase Operation y sobrescribimos el metodo <code>main</code> donde se coloca nuestra tarea. Por defecto, las operaciones se ejecutan en segundo plano, asi que no hay preocupaciones sobre bloquear el hilo principal.<br>Volviendo a la tarea de configurar la celda de table view, podrias notar que hay una dependencia entre estas dos tareas, solo hacemos el proceso de filtrado despues de descargar la imagen. En otras palabras, la operacion <code>ImageFilterOperation</code> depende de la operacion <code>DownloadImageOperation</code>. Las Dependencias de Operaciones es una de las ‚Äúfunciones estrella‚Äù de Operation junto con la capacidad de cancelar una operacion en ejecucion. Al vincular las dos operaciones, aseguramos que la operacion dependiente no comience antes de que la operacion prerequisito se haya completado. Adicionalmente, el vinculo crea una forma limpia de pasar datos de la primera a la segunda.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">e.g</span><br><span class="line"><span class="keyword">let</span> dependencyImage = <span class="keyword">self</span>.dependencies</span><br><span class="line">    .compactMap &#123; $<span class="number">0</span> <span class="keyword">as</span>? <span class="type">DownloadImageOperation</span> &#125;</span><br><span class="line">    .first</span><br></pre></td></tr></table></figure>

<p>Es hora de hacer la mejora.<br>Primero definamos un <code>OperationQueue</code> en el ViewController. La clase <code>OperationQueue</code> es lo que usamos para gestionar Operations.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> queue = <span class="type">OperationQueue</span>()</span><br><span class="line">    <span class="comment">// The rest omiited</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> cell = tableView.dequeueReusableCell(withIdentifier: <span class="string">"CellId"</span>, <span class="keyword">for</span>: indexPath) <span class="keyword">as</span>! <span class="type">PostTableViewCell</span></span><br><span class="line">        <span class="keyword">let</span> input = urls[indexPath.row]</span><br><span class="line">        <span class="keyword">let</span> downloadOpt = <span class="type">DownloadImageOperation</span>(url: <span class="type">URL</span>(string: input.url)!)</span><br><span class="line">        <span class="keyword">let</span> grayScaleOpt = <span class="type">ImageFilterOperation</span>()</span><br><span class="line"></span><br><span class="line">        grayScaleOpt.addDependency(downloadOpt)</span><br><span class="line">        grayScaleOpt.completionBlock = &#123;</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                cell.lblPostTitle.text = input.title</span><br><span class="line">                cell.imgPostImage.contentMode = .scaleToFill</span><br><span class="line">                cell.imgPostImage.image = grayScaleOpt.processedImage</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.queue.addOperation(downloadOpt)</span><br><span class="line">        <span class="keyword">self</span>.queue.addOperation(grayScaleOpt)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Aqui, inicializamos dos nuevas instancias de las clases <code>DownloadImageOperation</code> e <code>ImageFilterOperation</code>. Luego, establecemos que la operacion <code>grayScaleOpt</code> depende de <code>downloadOpt</code> lo que asegurara que <code>grayScaleOpt</code> solo se ejecute despues de que <code>downloadOpt</code> se haya completado. Finalmente, agregamos estas dos operaciones al <code>OperationQueue</code>. Una vez que una operacion se agrega a la cola, la operacion sera programada. Si la cola encuentra un hilo disponible en el cual ejecutar la operacion, el trabajo se ejecutara hasta que se complete o sea cancelado. Cuando la operacion se completa, se llama al <code>completionBlock</code>.</p>
<blockquote>
<p>‚ÄúLas operaciones tienen efectos importantes en el rendimiento de tu aplicacion. Por ejemplo, si quieres descargar mucho contenido de Internet, podrias querer hacerlo solo cuando sea absolutamente necesario. Tambien, podrias decidir asegurar que solo un numero especifico de operaciones puedan ejecutarse al mismo tiempo. Si decides limitar el numero de operaciones concurrentes en una cola, puedes cambiar la propiedad maxConcurrentOperationCount de tu cola de operaciones. Esta es una propiedad entera que te permite especificar cuantas operaciones, como maximo, pueden ejecutarse en una cola en un momento dado.‚Äù (iOS 8 Swift Programming Cookbook)</p>
</blockquote>
<p>Aprender las teorias anteriores es suficiente, ahora recompila el proyecto para ver el resultado.</p>
<p><img src="/Post-Resources/Operations/EmptyList.jpeg" alt="" title="EmptyList"></p>
<p>Ops! Nada aparece, la imagen no se descargo! Algo salio mal ???<br>En el siguiente tutorial, descubriremos que paso con nuestro codigo y por que Operation no funciono correctamente como se esperaba.<br>Gracias por leer.</p>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5e9474199d6bcc0012d5bba6&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://ko-fi.com/uynguyen" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button is-warning donate" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="uynguyen.itus@gmail.com"><input type="hidden" name="currency_code" value="USD"></form></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5">Comentarios</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://uynguyen.github.io/es/posts/iOS-Concurrency-Operations/index.html';
            this.page.identifier = 'es/posts/iOS-Concurrency-Operations/index.html';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'uynguyen-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen"></figure><p class="title is-size-4 is-block line-height-inherit">Uy Nguyen</p><p class="is-size-6 is-block">Software engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-envelope mr-1"></i><span>uynguyen.itus@gmail.com</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Entradas</p><a href="/archives"><p class="title">59</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categor√≠as</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Etiquetas</p><a href="/tags"><p class="title">36</p></a></div></div></nav><div class="level"><a class="level-item button is-rounded" style="background-color:#f14668e3;color:white;font-weight:bold;" href="https://ko-fi.com/uynguyen" target="_blank" rel="noopener">if üëç then Buy me a Coffee</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/uynguyen"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://www.linkedin.com/in/uynguyen505"><i class="fab fa-linkedin"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Enlaces</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://uynguyen.github.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Uy Nguyen</span></span><span class="level-right"><span class="level-item tag">uynguyen.github.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recientes</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2026-01-31T03:00:00.000Z">2026-01-31</time></p><p class="title is-6"><a class="link-muted" href="/2026/01/31/Bluetooth-Callback-vs-Reactive-Programming/">Bluetooth Development: Callback vs Reactive Programming</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2025-04-02T11:03:38.000Z">2025-04-02</time></p><p class="title is-6"><a class="link-muted" href="/2025/04/02/Bluetooth-security-Implement-authentication/">Securing Bluetooth Communication: Implementing Authentication and Encryption Flows</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-11-03T03:33:53.000Z">2024-11-03</time></p><p class="title is-6"><a class="link-muted" href="/2024/11/03/iOS-18-What-s-news-in-CoreBluetooth/">iOS 18: What&#039;s news in CoreBluetooth?</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-31T03:38:32.000Z">2024-08-31</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/31/Bluetooth-security-Pairing-and-Bonding/">Bluetooth security: Pairing and Bonding</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-04T05:10:39.000Z">2024-08-04</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/04/Android-Bluetooth-A-Pitfall/">Android Bluetooth: A Pitfall</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Etiquetas</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Appclip/"><span class="tag">Appclip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bluetooth/"><span class="tag">Bluetooth</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Books/"><span class="tag">Books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cocoa/"><span class="tag">Cocoa</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Concurrency/"><span class="tag">Concurrency</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Conference/"><span class="tag">Conference</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Core-Data/"><span class="tag">Core Data</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CoreBluetooh/"><span class="tag">CoreBluetooh</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CrossPlatform/"><span class="tag">CrossPlatform</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Design-Patterns/"><span class="tag">Design Patterns</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DispatchQueue/"><span class="tag">DispatchQueue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Memory-management/"><span class="tag">Memory management</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Notification/"><span class="tag">Notification</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Objective-C/"><span class="tag">Objective-C</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Operations/"><span class="tag">Operations</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReactNative/"><span class="tag">ReactNative</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reactive/"><span class="tag">Reactive</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxJava/"><span class="tag">RxJava</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxSwift/"><span class="tag">RxSwift</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Architecture/"><span class="tag">Software Architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI/"><span class="tag">UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UIStackView/"><span class="tag">UIStackView</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UML/"><span class="tag">UML</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vendor/"><span class="tag">Vendor</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WatchOS/"><span class="tag">WatchOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web-Bluetooth/"><span class="tag">Web Bluetooth</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/books/"><span class="tag">books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iBeacon/"><span class="tag">iBeacon</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">23</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/study/"><span class="tag">study</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a><p class="size-small"><span>&copy; Uy Nguyen</span>¬†¬†Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>¬†&amp;¬†<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("es");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://uynguyen.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Teclea algo..."></div><a class="searchbox-close" href="javascript:;">√ó</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Teclea algo...","untitled":"(Untitled)","posts":"Entradas","pages":"Pages","categories":"Categor√≠as","tags":"Etiquetas"});
        });</script></body></html>