<!doctype html>
<html lang="vi"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>iOS Concurrency NÃ¢ng Cao: Async Operations [2] - Uy Nguyen</title><meta description="Trong bÃ i viáº¿t trÆ°á»›c, iOS Concurrency NÃ¢ng Cao: Operations, chÃºng ta Ä‘Ã£ Ä‘i qua cÃ¡c khÃ¡i niá»‡m vá» Operation trÃªn iOS vÃ  xÃ¢y dá»±ng má»™t á»©ng dá»¥ng demo Ä‘á»ƒ táº£i má»™t sá»‘ bÃ i viáº¿t cá»§a tÃ´i. Sau khi táº£i cÃ¡c hÃ¬nh áº£"><meta property="og:type" content="blog"><meta property="og:title" content="iOS Concurrency NÃ¢ng Cao: Async Operations [2]"><meta property="og:url" content=":year/:month/:day/:title/"><meta property="og:site_name" content="Uy Nguyen"><meta property="og:description" content="Trong bÃ i viáº¿t trÆ°á»›c, iOS Concurrency NÃ¢ng Cao: Operations, chÃºng ta Ä‘Ã£ Ä‘i qua cÃ¡c khÃ¡i niá»‡m vá» Operation trÃªn iOS vÃ  xÃ¢y dá»±ng má»™t á»©ng dá»¥ng demo Ä‘á»ƒ táº£i má»™t sá»‘ bÃ i viáº¿t cá»§a tÃ´i. Sau khi táº£i cÃ¡c hÃ¬nh áº£"><meta property="og:locale" content="vi_VN"><meta property="article:published_time" content="2020-05-30T10:02:31.000Z"><meta property="article:modified_time" content="2026-01-26T06:49:48.793Z"><meta property="article:author" content="Uy Nguyen"><meta property="article:tag" content="Concurrency"><meta property="article:tag" content="Operations"><meta property="article:tag" content="iOS"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/Post-Resources/Operations_2/operations.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://uynguyen.github.io/vi/posts/Advanced-iOS-Concurrency-Async-Operations-2/index.html"},"headline":"Uy Nguyen","image":["https://uynguyen.github.io/Post-Resources/Operations_2/operations.png","https://uynguyen.github.io/Post-Resources/Operations_2/Async_Operation_State.png","https://uynguyen.github.io/Post-Resources/Operations_2/final.gif"],"datePublished":"2020-05-30T10:02:31.000Z","dateModified":"2026-01-26T06:49:48.793Z","author":{"@type":"Person","name":"Uy Nguyen"},"description":"Trong bÃ i viáº¿t trÆ°á»›c, iOS Concurrency NÃ¢ng Cao: Operations, chÃºng ta Ä‘Ã£ Ä‘i qua cÃ¡c khÃ¡i niá»‡m vá» Operation trÃªn iOS vÃ  xÃ¢y dá»±ng má»™t á»©ng dá»¥ng demo Ä‘á»ƒ táº£i má»™t sá»‘ bÃ i viáº¿t cá»§a tÃ´i. Sau khi táº£i cÃ¡c hÃ¬nh áº£"}</script><link rel="canonical" href="https://uynguyen.github.io/vi/posts/Advanced-iOS-Concurrency-Async-Operations-2/index.html"><link rel="icon" href="/Post-Resources/UyNguyen.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><meta property="og:image" content="/Post-Resources/Operations_2/operations.png"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-163508356-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-163508356-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><div class="navbar-item has-dropdown is-hoverable language-switcher is-hidden-mobile"><a class="navbar-link" title="Language"><i class="fas fa-globe"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="/2020/05/30/Advanced-iOS-Concurrency-Async-Operations-2/">English</a><a class="navbar-item is-active" href="/vi/posts/Advanced-iOS-Concurrency-Async-Operations-2/">Tiáº¿ng Viá»‡t</a><a class="navbar-item" href="/es/posts/Advanced-iOS-Concurrency-Async-Operations-2/">EspaÃ±ol</a></div></div><a class="navbar-item search is-hidden-mobile" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><div class="mobile-toolbar is-hidden-tablet"><div class="container"><div class="mobile-toolbar-content"><button class="mobile-toolbar-btn" id="mobile-lang-btn" title="Language"><i class="fas fa-globe"></i><span>Tiáº¿ng Viá»‡t</span></button><button class="mobile-toolbar-btn search" title="Search"><i class="fas fa-search"></i><span>Search</span></button></div></div></div><div class="language-picker-overlay" id="lang-picker-overlay"><div class="language-picker-backdrop"></div><div class="language-picker-modal"><div class="language-picker-header"><span>Language</span><button class="language-picker-close" id="lang-picker-close"><i class="fas fa-times"></i></button></div><div class="language-picker-options"><a class="language-picker-option" href="/2020/05/30/Advanced-iOS-Concurrency-Async-Operations-2/"><span class="lang-name">English</span></a><a class="language-picker-option is-active" href="/vi/posts/Advanced-iOS-Concurrency-Async-Operations-2/"><span class="lang-name">Tiáº¿ng Viá»‡t</span><i class="fas fa-check"></i></a><a class="language-picker-option" href="/es/posts/Advanced-iOS-Concurrency-Async-Operations-2/"><span class="lang-name">EspaÃ±ol</span></a></div></div></div><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"></div></div><h1 class="title is-3 is-size-4-mobile">iOS Concurrency NÃ¢ng Cao: Async Operations [2]</h1><div class="content"><p><img src="/Post-Resources/Operations_2/operations.png" alt="" title="Operations"></p>
<p>Trong bÃ i viáº¿t trÆ°á»›c, <a href="/2020/05/16/iOS-Concurrency-Operations">iOS Concurrency NÃ¢ng Cao: Operations</a>, chÃºng ta Ä‘Ã£ Ä‘i qua cÃ¡c khÃ¡i niá»‡m vá» Operation trÃªn iOS vÃ  xÃ¢y dá»±ng má»™t á»©ng dá»¥ng demo Ä‘á»ƒ táº£i má»™t sá»‘ bÃ i viáº¿t cá»§a tÃ´i. Sau khi táº£i cÃ¡c hÃ¬nh áº£nh bÃ¬a, chÃºng sáº½ Ä‘Æ°á»£c Ã¡p dá»¥ng má»™t filter Ä‘Æ¡n giáº£n, sau Ä‘Ã³ Ä‘Æ°á»£c hiá»ƒn thá»‹ trong table view. Tuy nhiÃªn, á»©ng dá»¥ng váº«n chÆ°a hoÃ n thiá»‡n. CÃ³ Ä‘iá»u gÃ¬ Ä‘Ã³ khÃ´ng Ä‘Ãºng vá»›i á»©ng dá»¥ng cá»§a chÃºng ta khiáº¿n nÃ³ khÃ´ng hiá»ƒn thá»‹ Ä‘Ãºng cÃ¡c hÃ¬nh áº£nh Ä‘Ã£ táº£i. Trong hÆ°á»›ng dáº«n nÃ y, chÃºng ta sáº½ tiáº¿p tá»¥c tá»« nÆ¡i Ä‘Ã£ dá»«ng láº¡i.<br>Sáºµn sÃ ng nÃ o!</p>
<a id="more"></a>
<h2 id="Vong-doi-cua-Operation"><a href="#Vong-doi-cua-Operation" class="headerlink" title="VÃ²ng Ä‘á»i cá»§a Operation"></a>VÃ²ng Ä‘á»i cá»§a Operation</h2><p>Äá»ƒ tÃ¬m ra táº¡i sao á»©ng dá»¥ng cá»§a chÃºng ta khÃ´ng hoáº¡t Ä‘á»™ng Ä‘Ãºng, hÃ£y xem láº¡i mÃ£ nguá»“n hiá»‡n táº¡i</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DownloadImageOperation</span>: <span class="title">Operation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> !isCancelled <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">URLSession</span>.shared.dataTask(with: <span class="keyword">self</span>.url, completionHandler: &#123; (data, res, error) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> error == <span class="literal">nil</span>,</span><br><span class="line">                <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.outputImage = <span class="type">UIImage</span>(data: data)</span><br><span class="line">        &#125;).resume()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>HÃ¬nh áº£nh sau mÃ´ táº£ cÃ¡c thay Ä‘á»•i vá» tráº¡ng thÃ¡i cá»§a operation.<br><img src="/Post-Resources/Operations_2/Async_Operation_State.png" alt="" title="Async_Operation_State"></p>
<p>Khi phÆ°Æ¡ng thá»©c <code>main</code> Ä‘Æ°á»£c gá»i, nÃ³ sáº½ thá»±c thi tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™ cá»§a chÃºng ta vÃ  sau Ä‘Ã³ thoÃ¡t ngay láº­p tá»©c khiáº¿n tráº¡ng thÃ¡i cá»§a operation chuyá»ƒn sang <code>isFinish</code>. Táº¡i thá»i Ä‘iá»ƒm Ä‘Ã³, tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™ cá»§a chÃºng ta thá»±c sá»± chÆ°a hoÃ n thÃ nh.<br>Hiá»‡n táº¡i, chÃºng ta Ä‘ang gá»i táº£i hÃ¬nh áº£nh bÃªn trong phÆ°Æ¡ng thá»©c <code>main</code> cá»§a Operation. NguyÃªn nhÃ¢n gá»‘c rá»… liÃªn quan Ä‘áº¿n chÃ­nh VÃ²ng Ä‘á»i cá»§a Operation. Do Ä‘Ã³, Ä‘á»ƒ há»— trá»£ cÃ¡c operation báº¥t Ä‘á»“ng bá»™ trong á»©ng dá»¥ng, chÃºng ta cáº§n quáº£n lÃ½ thá»§ cÃ´ng cÃ¡c tráº¡ng thÃ¡i cá»§a operation.</p>
<h2 id="Key-Value-Observing"><a href="#Key-Value-Observing" class="headerlink" title="Key-Value Observing"></a><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html">Key-Value Observing</a></h2><p>TrÆ°á»›c khi triá»ƒn khai class Async Operation tÃ¹y chá»‰nh, chÃºng ta cáº§n há»c má»™t khÃ¡i niá»‡m má»›i trÆ°á»›c: KVO. TÃ´i giáº£ Ä‘á»‹nh ráº±ng báº¡n chÆ°a nghe vá» khÃ¡i niá»‡m nÃ y nÃªn chÃºng ta sáº½ cÃ³ má»™t cÃ¡i nhÃ¬n nhanh vá» nÃ³ trÆ°á»›c.<br>Key-Value Observing, hay KVO, lÃ  má»™t trong nhá»¯ng ká»¹ thuáº­t Ä‘á»ƒ theo dÃµi sá»± thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng trong Objective-C vÃ  Swift. Báº¥t cá»© khi nÃ o giÃ¡ trá»‹ cá»§a cÃ¡c thuá»™c tÃ­nh Ä‘Æ°á»£c theo dÃµi thay Ä‘á»•i, khá»‘i mÃ£ theo dÃµi sáº½ Ä‘Æ°á»£c thá»±c thi. Cá»‘t lÃµi cá»§a KVO dá»±a trÃªn Observer Pattern.<br>CÃ¡c class Swift Ä‘Æ°á»£c káº¿ thá»«a tá»« class <code>NSObject</code> cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c cho phÃ©p cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c theo dÃµi cÃ¡c thuá»™c tÃ­nh cá»§a chÃºng.</p>
<blockquote>
<p>Key-value observing cung cáº¥p má»™t cÆ¡ cháº¿ cho phÃ©p cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c thÃ´ng bÃ¡o vá» sá»± thay Ä‘á»•i cá»§a cÃ¡c thuá»™c tÃ­nh cá»¥ thá»ƒ cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c. NÃ³ Ä‘áº·c biá»‡t há»¯u Ã­ch cho viá»‡c giao tiáº¿p giá»¯a cÃ¡c lá»›p model vÃ  controller trong má»™t á»©ng dá»¥ng.</p>
</blockquote>
<p>HÃ£y táº¡o má»™t Playground Ä‘á»ƒ kiá»ƒm tra.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreditCard</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">dynamic</span> <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> number: <span class="type">Int</span> = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increaseNumber</span><span class="params">(by value: Int)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.number += value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cretdit: <span class="type">CreditCard</span></span><br><span class="line">    <span class="keyword">var</span> kvoToken: <span class="type">NSKeyValueObservation?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(cretdit: <span class="type">CreditCard</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.cretdit = cretdit</span><br><span class="line">        kvoToken = <span class="keyword">self</span>.cretdit.observe(\.number, options: .new) &#123; (credit, change) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> newNumber = change.newValue <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"New number is \(newNumber)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        kvoToken?.invalidate()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> credit = <span class="type">CreditCard</span>()</span><br><span class="line"><span class="keyword">let</span> person = <span class="type">Person</span>(cretdit: credit)</span><br><span class="line">credit.increaseNumber(by: <span class="number">500</span>)</span><br></pre></td></tr></table></figure>

<p>á» Ä‘Ã¢y, tÃ´i Ä‘á»‹nh nghÄ©a hai class: <code>CreditCard</code> vÃ  <code>Person</code>. Má»™t Ä‘á»‘i tÆ°á»£ng <code>Person</code> giá»¯ má»™t Ä‘á»‘i tÆ°á»£ng <code>CreditCard</code> nhÆ° má»™t thuá»™c tÃ­nh. Äiá»u tÃ´i muá»‘n lÃ  báº¥t cá»© khi nÃ o thuá»™c tÃ­nh <code>number</code> cá»§a tháº» tÃ­n dá»¥ng thay Ä‘á»•i, ngÆ°á»i Ä‘Ã³ sáº½ Ä‘Æ°á»£c thÃ´ng bÃ¡o. ÄÃ¢y lÃ  lÃºc KVO xuáº¥t hiá»‡n.<br>Cháº¡y Ä‘oáº¡n code trÃªn trong playground, báº¡n sáº½ tháº¥y log <code>New number is \(newNumber)</code> Ä‘Æ°á»£c in ra console.</p>
<p>Táº¡i sao chÃºng ta cáº§n biáº¿t vá» KVO? CÃ¢u tráº£ lá»i lÃ  vÃ¬ class Operation sá»­ dá»¥ng thÃ´ng bÃ¡o KVO. Báº¥t cá»© khi nÃ o tráº¡ng thÃ¡i cá»§a Operation thay Ä‘á»•i, má»™t thÃ´ng bÃ¡o KVO sáº½ Ä‘Æ°á»£c gá»­i Ä‘i.<br>KhÃ´ng cÃ³ thÃ´ng bÃ¡o KVO, OperationQueue sáº½ khÃ´ng thá»ƒ theo dÃµi tráº¡ng thÃ¡i cá»§a cÃ¡c operation Ä‘á»ƒ cáº­p nháº­t chÃ­nh xÃ¡c. Do Ä‘Ã³, khi chÃºng ta tá»± quáº£n lÃ½ tráº¡ng thÃ¡i cá»§a operation, chÃºng ta pháº£i Ä‘áº£m báº£o cÃ¡c thÃ´ng bÃ¡o KVO Ä‘Ã³ Ä‘Æ°á»£c gá»­i Ä‘Ãºng cÃ¡ch.</p>
<h2 id="Async-Operation"><a href="#Async-Operation" class="headerlink" title="Async Operation"></a>Async Operation</h2><p>HÃ£y táº¡o class <code>AsyncOperation</code> káº¿ thá»«a tá»« class <code>Operation</code>.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AsyncOperation</span>: <span class="title">Operation</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">State</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> ready, executing, finished</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> keyPath: <span class="type">String</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"is\(rawValue.capitalized)"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Pháº§n cÃ²n láº¡i cá»§a code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Tiáº¿p theo, chÃºng ta khai bÃ¡o má»™t thuá»™c tÃ­nh Ä‘á»ƒ theo dÃµi tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> state = <span class="type">State</span>.ready &#123;</span><br><span class="line">    <span class="keyword">willSet</span> &#123;</span><br><span class="line">        willChangeValue(forKey: newValue.keyPath)</span><br><span class="line">        willChangeValue(forKey: state.keyPath)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        didChangeValue(forKey: oldValue.keyPath)</span><br><span class="line">        didChangeValue(forKey: state.keyPath)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Class cÆ¡ sá»Ÿ <code>Operation</code> cáº§n biáº¿t sá»± thay Ä‘á»•i cá»§a cáº£ tráº¡ng thÃ¡i cÅ© vÃ  má»›i.<br>Láº¥y má»™t trÆ°á»ng há»£p cá»¥ thá»ƒ lÃ m vÃ­ dá»¥, tráº¡ng thÃ¡i hiá»‡n táº¡i lÃ  <code>ready</code>, sau Ä‘Ã³ chÃºng ta Ä‘áº·t tráº¡ng thÃ¡i thÃ nh <code>executing</code>. CÃ³ 4 thÃ´ng bÃ¡o KVO nÃªn Ä‘Æ°á»£c gá»­i:</p>
<ul>
<li>Äáº§u tiÃªn, thÃ´ng bÃ¡o willChangeValue cho <code>isReady</code>.</li>
<li>Sau Ä‘Ã³, thÃ´ng bÃ¡o willChangeValue cho <code>executing</code>.</li>
<li>Tiáº¿p theo, thÃ´ng bÃ¡o willChange cho <code>isReady</code>.</li>
<li>Cuá»‘i cÃ¹ng, thÃ´ng bÃ¡o willChange cho <code>executing</code>.</li>
</ul>
<p>Sau Ä‘Ã³, chÃºng ta override cÃ¡c thuá»™c tÃ­nh cá»§a tráº¡ng thÃ¡i.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> isReady: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.isReady &amp;&amp; state == .ready</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> isExecuting: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state == .executing</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> isFinished: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state == .finished</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> isAsynchronous: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÄÃ³ lÃ  táº¥t cáº£ Ä‘á»ƒ quáº£n lÃ½ tráº¡ng thÃ¡i cá»§a class Async Operation.</p>
<p>Khi thÃªm má»™t operation vÃ o operation queue, phÆ°Æ¡ng thá»©c <code>start</code> lÃ  thá»© Ä‘Æ°á»£c gá»i Ä‘áº§u tiÃªn. sau Ä‘Ã³ nÃ³ sáº½ gá»i phÆ°Æ¡ng thá»©c <code>main</code> cá»§a operation Ä‘á»ƒ thá»±c thi khá»‘i code chÃ­nh mÃ  báº¡n Ä‘Ã£ gÃ¡n cho operation.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">start</span><span class="params">()</span></span> &#123;</span><br><span class="line">    main()</span><br><span class="line">    state = .executing</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Báº¡n cÃ²n nhá»› khi tÃ´i Ä‘á» cáº­p ráº±ng Operation cÃ³ cÃ¡c tÃ­nh nÄƒng tuyá»‡t vá»i khiáº¿n nÃ³ vÆ°á»£t trá»™i hÆ¡n GCD? TÃ­nh nÄƒng Ä‘áº§u tiÃªn lÃ  dependencies vÃ  tÃ­nh nÄƒng cÃ²n láº¡i lÃ  kháº£ nÄƒng há»§y má»™t operation Ä‘ang cháº¡y. NÃ³ ráº¥t há»¯u Ã­ch trong trÆ°á»ng há»£p chÃºng ta muá»‘n dá»«ng cÃ¡c operation khÃ´ng cÃ²n liÃªn quan táº¡i má»™t thá»i Ä‘iá»ƒm nháº¥t Ä‘á»‹nh. VÃ­ dá»¥, há»§y táº£i dá»¯ liá»‡u khi ngÆ°á»i dÃ¹ng cuá»™n table khiáº¿n má»™t sá»‘ cell biáº¿n máº¥t.<br>HÃ£y thÃªm tÃ­nh nÄƒng nÃ y vÃ o class Async Operation cá»§a chÃºng ta.<br>Äáº§u tiÃªn, chÃºng ta cáº§n sá»­a Ä‘á»•i phÆ°Æ¡ng thá»©c <code>start</code> Ä‘á»ƒ kiá»ƒm tra thuá»™c tÃ­nh <code>isCancelled</code> trÆ°á»›c khi thá»±c sá»± gá»i phÆ°Æ¡ng thá»©c <code>main</code>.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">start</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> isCancelled &#123;</span><br><span class="line">        state = .finished</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    main()</span><br><span class="line">    state = .executing</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>VÃ  sau Ä‘Ã³ override phÆ°Æ¡ng thá»©c <code>cancel</code> Ä‘á»ƒ cáº­p nháº­t tráº¡ng thÃ¡i thÃ nh <code>finished</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">cancel</span><span class="params">()</span></span> &#123;</span><br><span class="line">    state = .finished</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Táº¡i thá»i Ä‘iá»ƒm nÃ y, chÃºng ta Ä‘Ã£ hoÃ n thÃ nh viá»‡c triá»ƒn khai class <code>Async Operation</code>. ÄÃ£ Ä‘áº¿n lÃºc káº¿t há»£p má»i thá»© láº¡i vá»›i nhau trong á»©ng dá»¥ng.</p>
<h2 id="Ket-hop-tat-ca-lai-voi-nhau"><a href="#Ket-hop-tat-ca-lai-voi-nhau" class="headerlink" title="Káº¿t há»£p táº¥t cáº£ láº¡i vá»›i nhau"></a>Káº¿t há»£p táº¥t cáº£ láº¡i vá»›i nhau</h2><p>VÃ¬ class <code>DownloadImageOperation</code> thá»±c thi báº¥t Ä‘á»“ng bá»™, chÃºng ta khÃ´ng thá»ƒ Ä‘áº·t class <code>Operation</code> lÃ m class cÆ¡ sá»Ÿ cá»§a nÃ³, giá» chÃºng ta Ä‘áº·t <code>AsyncOperation</code> thay tháº¿. Xin lÆ°u Ã½ ráº±ng Ä‘á»ƒ há»— trá»£ viá»‡c há»§y trong class <code>DownloadImageOperation</code>, chÃºng ta sáº½ giá»¯ giÃ¡ trá»‹ tráº£ vá» cá»§a viá»‡c táº¡o data task nhÆ° má»™t thuá»™c tÃ­nh cá»§a class nÃ y Ä‘á»ƒ cÃ³ thá»ƒ há»§y <code>URLSessionDataTask</code> nÃ y sau.<br>Class <code>DownloadImageOperation</code> sáº½ trÃ´ng nhÆ° dÆ°á»›i Ä‘Ã¢y.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DownloadImageOperation</span>: <span class="title">AsyncOperation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url: <span class="type">URL</span></span><br><span class="line">    <span class="keyword">var</span> outputImage: <span class="type">UIImage?</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> task: <span class="type">URLSessionDataTask?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(url: <span class="type">URL</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.url = url</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.task = <span class="type">URLSession</span>.shared.dataTask(with: <span class="keyword">self</span>.url, completionHandler: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (data, res, error) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> `<span class="keyword">self</span>` = <span class="keyword">self</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">defer</span> &#123; <span class="keyword">self</span>.state = .finished &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">guard</span> !<span class="keyword">self</span>.isCancelled <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">guard</span> error == <span class="literal">nil</span>,</span><br><span class="line">                <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.outputImage = <span class="type">UIImage</span>(data: data)</span><br><span class="line">        &#125;)</span><br><span class="line">        task?.resume()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">cancel</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.cancel()</span><br><span class="line">        task?.cancel()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HÃ£y quay láº¡i <code>ViewController</code> chÃ­nh cá»§a chÃºng ta. Äá»ƒ há»§y cÃ¡c operation Ä‘ang cháº¡y, trÆ°á»›c tiÃªn chÃºng ta thÃªm dictionary má»›i nhÆ° má»™t thuá»™c tÃ­nh cá»§a <code>ViewController</code> Ä‘á»ƒ theo dÃµi táº¥t cáº£ cÃ¡c operation Ä‘ang cháº¡y cho má»—i cell cá»§a table view táº¡i index path tÆ°Æ¡ng á»©ng.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> operations: [<span class="type">IndexPath</span>: [<span class="type">Operation</span>]] = [:]</span><br></pre></td></tr></table></figure>

<p>BÃªn trong delegate <code>func tableView(_ tableView:cellForRowAt indexPath:)</code>, sau khi thÃªm hai operation vÃ o operation queue, chÃºng ta cÅ©ng sáº½ thÃªm chÃºng vÃ o dictionary <code>operations</code> Ä‘á»ƒ theo dÃµi. NgoÃ i ra, náº¿u cÃ³ operation cho index path nÃ y, há»§y nÃ³ trÆ°á»›c khi giá»¯ cÃ¡i má»›i.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> existingOperations = operations[indexPath] &#123;</span><br><span class="line">    <span class="keyword">for</span> operation <span class="keyword">in</span> existingOperations &#123;</span><br><span class="line">        operation.cancel()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">operations[indexPath] = [grayScaleOpt, downloadOpt]</span><br></pre></td></tr></table></figure>

<p>Khi ngÆ°á»i dÃ¹ng cuá»™n table, má»™t sá»‘ cell biáº¿n máº¥t vÃ  delegate <code>func tableView(_ tableView:didEndDisplaying cell:indexPath:)</code> Ä‘Æ°á»£c gá»i. Táº¡i thá»i Ä‘iá»ƒm Ä‘Ã³, chÃºng ta cÅ©ng sáº½ há»§y cÃ¡c operation Ä‘ang cháº¡y cho cell Ä‘Ã³ Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng chá»‰ cÃ¡c operation cá»§a cÃ¡c cell hiá»ƒn thá»‹ má»›i Ä‘ang thá»±c thi.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, didEndDisplaying cell: UITableViewCell, forRowAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> operations = operations[indexPath] &#123;</span><br><span class="line">        <span class="keyword">for</span> operation <span class="keyword">in</span> operations &#123;</span><br><span class="line">            operation.cancel()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div style="text-align:center">

<p><img src="/Post-Resources/Operations_2/final.gif" alt="" title="Final app"></p>
</div>

<p>BÃ¢y giá», báº¡n sáº½ tháº¥y á»©ng dá»¥ng hoáº¡t Ä‘á»™ng Ä‘Ãºng. NgoÃ i ra, báº±ng cÃ¡ch báº¯t Ä‘áº§u vÃ  há»§y cÃ¡c operation má»™t cÃ¡ch thÃ´ng minh, chÃºng ta Ä‘ang tiáº¿t kiá»‡m lÆ°u lÆ°á»£ng máº¡ng cÅ©ng nhÆ° giáº£m tiÃªu thá»¥ pin. Nhá»¯ng Ä‘iá»u nÃ y cÃ³ thá»ƒ giÃºp á»©ng dá»¥ng cá»§a chÃºng ta cháº¡y nhanh hÆ¡n.</p>
<h2 id="Ket-luan"><a href="#Ket-luan" class="headerlink" title="Káº¿t luáº­n"></a>Káº¿t luáº­n</h2><p>CÃ³ má»™t sá»‘ lá»£i Ã­ch cá»§a <code>Operation</code> so vá»›i GCD giÃºp mÃ£ nguá»“n cá»§a chÃºng ta dá»… báº£o trÃ¬ vÃ  tÃ¡i sá»­ dá»¥ng.<br>Cuá»‘i cÃ¹ng cáº§n Ä‘á» cáº­p, hÃ£y cáº©n tháº­n khi sá»­ dá»¥ng Operation hoáº·c GCD vÃ¬ Concurrency Ä‘Ã´i khi táº¡o ra cÃ¡c bug khÃ´ng pháº£i lÃºc nÃ o cÅ©ng rÃµ rÃ ng Ä‘á»ƒ tÃ¬m vÃ  sá»­a. <a href="http://localhost:4000/2017/10/20/Review-Book-Clean-Code/">Trong Clean Code Book</a>, Robert C. Martin nÃªu ra má»™t sá»‘ Ä‘iá»ƒm quan trá»ng khi lÃ m viá»‡c vá»›i nhiá»u thread</p>
<blockquote>
<p>CÃ³ má»™t sá»‘ Ä‘á»‹nh nghÄ©a cÆ¡ báº£n chÃºng ta nÃªn biáº¿t khi nÃ³i vá» concurrency vÃ  thread: Bound resources, mutual exclusion, starvation, deadlock, vÃ  livelock.</p>
</blockquote>
<blockquote>
<p>Concurrency khÃ´ng pháº£i lÃºc nÃ o cÅ©ng cáº£i thiá»‡n hiá»‡u suáº¥t. ÄÃ´i khi nÃ³ táº¡o ra má»™t sá»‘ overhead vÃ  cÃ¡c bug tá»« nÃ³ thÆ°á»ng khÃ´ng láº·p láº¡i Ä‘Æ°á»£c.</p>
</blockquote>
<blockquote>
<p>Háº¡n cháº¿ viá»‡c truy cáº­p dá»¯ liá»‡u Ä‘Æ°á»£c chia sáº» giá»¯a nhiá»u hÆ¡n hai thread. Sá»­ dá»¥ng báº£n sao cá»§a dá»¯ liá»‡u náº¿u cÃ³ thá»ƒ.</p>
</blockquote>
<blockquote>
<p>Giá»¯ cÃ¡c pháº§n synchronized cÃ ng nhá» cÃ ng tá»‘t vÃ¬ Lock táº¡o ra Ä‘á»™ trá»… vÃ  thÃªm overhead. ChÃºng ráº¥t tá»‘n kÃ©m.</p>
</blockquote>
<blockquote>
<p>Code Ä‘a luá»“ng hoáº¡t Ä‘á»™ng khÃ¡c nhau trong cÃ¡c mÃ´i trÆ°á»ng khÃ¡c nhau: Cháº¡y test trong má»i mÃ´i trÆ°á»ng triá»ƒn khai tiá»m nÄƒng.</p>
</blockquote>
<p>Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y dá»± Ã¡n hoÃ n chá»‰nh qua <a href="https://github.com/uynguyen/iOS-Operations">link</a><br>Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘á»c.</p>
<h2 id="Tai-lieu-tham-khao"><a href="#Tai-lieu-tham-khao" class="headerlink" title="TÃ i liá»‡u tham kháº£o"></a>TÃ i liá»‡u tham kháº£o</h2><ul>
<li>Chapter 6: Operations, Concurrency By Tutorials - Multithreading in Swift with GCD and Operations, Raywenderlich,</li>
<li>Chapter 7: Concurrency and Multitasking, iOS 8 Swift Programming Cookbook, Oâ€™Reilly.</li>
</ul>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5e9474199d6bcc0012d5bba6&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://ko-fi.com/uynguyen" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button is-warning donate" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="uynguyen.itus@gmail.com"><input type="hidden" name="currency_code" value="USD"></form></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://uynguyen.github.io/vi/posts/Advanced-iOS-Concurrency-Async-Operations-2/index.html';
            this.page.identifier = 'vi/posts/Advanced-iOS-Concurrency-Async-Operations-2/index.html';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'uynguyen-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen"></figure><p class="title is-size-4 is-block line-height-inherit">Uy Nguyen</p><p class="is-size-6 is-block">Software engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-envelope mr-1"></i><span>uynguyen.itus@gmail.com</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">58</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-rounded" style="background-color:#f14668e3;color:white;font-weight:bold;" href="https://ko-fi.com/uynguyen" target="_blank" rel="noopener">if ğŸ‘ then Buy me a Coffee</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/uynguyen"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://www.linkedin.com/in/uynguyen505"><i class="fab fa-linkedin"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://uynguyen.github.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Uy Nguyen</span></span><span class="level-right"><span class="level-item tag">uynguyen.github.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2025-04-02T11:03:38.000Z">2025-04-02</time></p><p class="title is-6"><a class="link-muted" href="/2025/04/02/Bluetooth-security-Implement-authentication/">Securing Bluetooth Communication: Implementing Authentication and Encryption Flows</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-11-03T03:33:53.000Z">2024-11-03</time></p><p class="title is-6"><a class="link-muted" href="/2024/11/03/iOS-18-What-s-news-in-CoreBluetooth/">iOS 18: What&#039;s news in CoreBluetooth?</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-31T03:38:32.000Z">2024-08-31</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/31/Bluetooth-security-Pairing-and-Bonding/">Bluetooth security: Pairing and Bonding</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-04T05:10:39.000Z">2024-08-04</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/04/Android-Bluetooth-A-Pitfall/">Android Bluetooth: A Pitfall</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-06-30T03:48:09.000Z">2024-06-30</time></p><p class="title is-6"><a class="link-muted" href="/2024/06/30/Best-practice-iOS-vs-Android-Bluetooth/">Best practice: iOS vs Android Bluetooth</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Appclip/"><span class="tag">Appclip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bluetooth/"><span class="tag">Bluetooth</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Books/"><span class="tag">Books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cocoa/"><span class="tag">Cocoa</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Concurrency/"><span class="tag">Concurrency</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Conference/"><span class="tag">Conference</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Core-Data/"><span class="tag">Core Data</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CoreBluetooh/"><span class="tag">CoreBluetooh</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CrossPlatform/"><span class="tag">CrossPlatform</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Design-Patterns/"><span class="tag">Design Patterns</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DispatchQueue/"><span class="tag">DispatchQueue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Memory-management/"><span class="tag">Memory management</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Notification/"><span class="tag">Notification</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Objective-C/"><span class="tag">Objective-C</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Operations/"><span class="tag">Operations</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReactNative/"><span class="tag">ReactNative</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Architecture/"><span class="tag">Software Architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI/"><span class="tag">UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UIStackView/"><span class="tag">UIStackView</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UML/"><span class="tag">UML</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vendor/"><span class="tag">Vendor</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WatchOS/"><span class="tag">WatchOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web-Bluetooth/"><span class="tag">Web Bluetooth</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/books/"><span class="tag">books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iBeacon/"><span class="tag">iBeacon</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/study/"><span class="tag">study</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a><p class="size-small"><span>&copy; Uy Nguyen</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("vi");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://uynguyen.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>