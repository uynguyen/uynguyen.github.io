<!doctype html>
<html lang="vi"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Grand Central Dispatch trong Swift - Uy Nguyen</title><meta description="Grand Central Dispatch, hay viáº¿t táº¯t lÃ  GCD, lÃ  má»™t táº­p API C cáº¥p tháº¥p Ä‘á»ƒ quáº£n lÃ½ cÃ¡c tÃ¡c vá»¥ Ä‘á»“ng thá»i. NÃ³ giÃºp chÃºng ta cáº£i thiá»‡n hiá»‡u suáº¥t á»©ng dá»¥ng báº±ng cÃ¡ch thá»±c thi má»™t khá»‘i code trÃªn cÃ¡c thread p"><meta property="og:type" content="blog"><meta property="og:title" content="Grand Central Dispatch trong Swift"><meta property="og:url" content=":year/:month/:day/:title/"><meta property="og:site_name" content="Uy Nguyen"><meta property="og:description" content="Grand Central Dispatch, hay viáº¿t táº¯t lÃ  GCD, lÃ  má»™t táº­p API C cáº¥p tháº¥p Ä‘á»ƒ quáº£n lÃ½ cÃ¡c tÃ¡c vá»¥ Ä‘á»“ng thá»i. NÃ³ giÃºp chÃºng ta cáº£i thiá»‡n hiá»‡u suáº¥t á»©ng dá»¥ng báº±ng cÃ¡ch thá»±c thi má»™t khá»‘i code trÃªn cÃ¡c thread p"><meta property="og:locale" content="vi_VN"><meta property="article:published_time" content="2018-01-04T04:43:23.000Z"><meta property="article:modified_time" content="2026-01-26T06:49:48.779Z"><meta property="article:author" content="Uy Nguyen"><meta property="article:tag" content="iOS"><meta property="article:tag" content="DispatchQueue"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/Post-Resources/GCD/Banner.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://uynguyen.github.io/vi/posts/Grand-Central-Dispatch-in-Swift/index.html"},"headline":"Uy Nguyen","image":["https://uynguyen.github.io/Post-Resources/GCD/Banner.png","https://uynguyen.github.io/Post-Resources/GCD/SerialQueue.png","https://uynguyen.github.io/Post-Resources/GCD/ConcurrentQueue.png","https://uynguyen.github.io/Post-Resources/GCD/Deadlock_On_Main_Queue.png","https://uynguyen.github.io/Post-Resources/GCD/Deadlock.png"],"datePublished":"2018-01-04T04:43:23.000Z","dateModified":"2026-01-26T06:49:48.779Z","author":{"@type":"Person","name":"Uy Nguyen"},"description":"Grand Central Dispatch, hay viáº¿t táº¯t lÃ  GCD, lÃ  má»™t táº­p API C cáº¥p tháº¥p Ä‘á»ƒ quáº£n lÃ½ cÃ¡c tÃ¡c vá»¥ Ä‘á»“ng thá»i. NÃ³ giÃºp chÃºng ta cáº£i thiá»‡n hiá»‡u suáº¥t á»©ng dá»¥ng báº±ng cÃ¡ch thá»±c thi má»™t khá»‘i code trÃªn cÃ¡c thread p"}</script><link rel="canonical" href="https://uynguyen.github.io/vi/posts/Grand-Central-Dispatch-in-Swift/index.html"><link rel="icon" href="/Post-Resources/UyNguyen.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><meta property="og:image" content="/Post-Resources/GCD/Banner.png"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-163508356-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-163508356-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><div class="navbar-item has-dropdown is-hoverable language-switcher"><a class="navbar-link" title="Language"><i class="fas fa-globe"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="/2018/01/04/Grand-Central-Dispatch-in-Swift/">English</a><a class="navbar-item is-active" href="/vi/posts/Grand-Central-Dispatch-in-Swift/">Tiáº¿ng Viá»‡t</a><a class="navbar-item" href="/es/posts/Grand-Central-Dispatch-in-Swift/">EspaÃ±ol</a></div></div><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"></div></div><h1 class="title is-3 is-size-4-mobile">Grand Central Dispatch trong Swift</h1><div class="content"><p><img src="/Post-Resources/GCD/Banner.png" alt=""><br><em>Grand Central Dispatch</em>, hay viáº¿t táº¯t lÃ  GCD, lÃ  má»™t táº­p API C cáº¥p tháº¥p Ä‘á»ƒ quáº£n lÃ½ cÃ¡c tÃ¡c vá»¥ Ä‘á»“ng thá»i. NÃ³ giÃºp chÃºng ta cáº£i thiá»‡n hiá»‡u suáº¥t á»©ng dá»¥ng báº±ng cÃ¡ch thá»±c thi má»™t khá»‘i code trÃªn cÃ¡c thread phÃ¹ há»£p, nhÆ° thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ tÃ­nh toÃ¡n náº·ng á»Ÿ background. GCD cung cáº¥p nhiá»u tÃ¹y chá»n Ä‘á»ƒ cháº¡y cÃ¡c tÃ¡c vá»¥ nhÆ° Ä‘á»“ng bá»™, báº¥t Ä‘á»“ng bá»™, sau má»™t khoáº£ng delay nháº¥t Ä‘á»‹nh, v.v.<br>Trong bÃ i viáº¿t nÃ y, tÃ´i sáº½ giáº£i thÃ­ch chi tiáº¿t hÆ¡n vá» GCD vÃ  cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng, cÅ©ng nhÆ° cung cáº¥p má»™t sá»‘ Ä‘iá»ƒm thÃº vá»‹ khi lÃ m viá»‡c vá»›i GCD. HÃ£y báº¯t Ä‘áº§u.</p>
<a id="more"></a>
<h2 id="Gioi-thieu"><a href="#Gioi-thieu" class="headerlink" title="Giá»›i thiá»‡u"></a>Giá»›i thiá»‡u</h2><p>Trung tÃ¢m cá»§a GCD lÃ  cÃ¡c dispatch queue - nhá»¯ng pool cá»§a cÃ¡c thread Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi GCD. Apple táº¡o ra GCD Ä‘á»ƒ cÃ¡c developer khÃ´ng cáº§n quan tÃ¢m quÃ¡ nhiá»u Ä‘áº¿n cÃ¡c queue nÃ y, há» chá»‰ Ä‘Æ¡n giáº£n dispatch má»™t khá»‘i code Ä‘áº¿n má»™t queue nháº¥t Ä‘á»‹nh mÃ  khÃ´ng cáº§n quan tÃ¢m thread nÃ o Ä‘Æ°á»£c sá»­ dá»¥ng.</p>
<h2 id="Cac-khai-niem-GCD"><a href="#Cac-khai-niem-GCD" class="headerlink" title="CÃ¡c khÃ¡i niá»‡m GCD"></a>CÃ¡c khÃ¡i niá»‡m GCD</h2><h3 id="Concurrency"><a href="#Concurrency" class="headerlink" title="Concurrency"></a>Concurrency</h3><p>Concurrency Ä‘áº¡t Ä‘Æ°á»£c khi cÃ³ nhiá»u hÆ¡n hai tÃ¡c vá»¥ Ä‘Æ°á»£c thá»±c thi cÃ¹ng má»™t lÃºc. Thá»±c táº¿, tá»« â€œConcurrencyâ€ khÃ´ng chÃ­nh xÃ¡c cÃ³ nghÄ©a lÃ  â€œcÃ¹ng má»™t lÃºcâ€ hay â€œxáº£y ra song songâ€. BÃªn trong, CPU cung cáº¥p cho má»—i tÃ¡c vá»¥ má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh Ä‘á»ƒ thá»±c hiá»‡n cÃ´ng viá»‡c. VÃ­ dá»¥, náº¿u cÃ³ 5 tÃ¡c vá»¥ cáº§n Ä‘Æ°á»£c thá»±c thi trong má»™t giÃ¢y, vá»›i cÃ¹ng Ä‘á»™ Æ°u tiÃªn, há»‡ Ä‘iá»u hÃ nh sáº½ chia 1.000 mili giÃ¢y cho 5 (tÃ¡c vá»¥) vÃ  sáº½ cung cáº¥p cho má»—i tÃ¡c vá»¥ 200 mili giÃ¢y thá»i gian CPU. Káº¿t quáº£ lÃ , chÃºng sáº½ cÃ³ váº» nhÆ° Ä‘Æ°á»£c thá»±c thi Ä‘á»“ng thá»i.</p>
<h3 id="Serial-queue-va-concurrent-queue"><a href="#Serial-queue-va-concurrent-queue" class="headerlink" title="Serial queue vÃ  concurrent queue"></a>Serial queue vÃ  concurrent queue</h3><p>Má»™t serial queue sáº½ thá»±c thi cÃ¡c tÃ¡c vá»¥ theo kiá»ƒu first-in-first-out (FIFO). Äiá»u nÃ y cÃ³ nghÄ©a lÃ  chÃºng chá»‰ cÃ³ thá»ƒ thá»±c thi má»™t khá»‘i code táº¡i má»™t thá»i Ä‘iá»ƒm. ChÃºng khÃ´ng cháº¡y trÃªn main thread, do Ä‘Ã³, chÃºng khÃ´ng block UI.<br><img src="/Post-Resources/GCD/SerialQueue.png" alt=""><br>NgÆ°á»£c láº¡i, má»™t concurrent queue cho phÃ©p thá»±c thi nhiá»u tÃ¡c vá»¥ song song. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  cÃ¡c tÃ¡c vá»¥ cÃ³ thá»ƒ hoÃ n thÃ nh theo báº¥t ká»³ thá»© tá»± nÃ o vÃ  báº¡n sáº½ khÃ´ng biáº¿t thá»i gian nÃ³ sáº½ máº¥t.<br><img src="/Post-Resources/GCD/ConcurrentQueue.png" alt=""></p>
<h3 id="Phuong-thuc-dong-bo-sync-va-bat-dong-bo-async"><a href="#Phuong-thuc-dong-bo-sync-va-bat-dong-bo-async" class="headerlink" title="PhÆ°Æ¡ng thá»©c Ä‘á»“ng bá»™ (sync) vÃ  báº¥t Ä‘á»“ng bá»™ (async)"></a>PhÆ°Æ¡ng thá»©c Ä‘á»“ng bá»™ (sync) vÃ  báº¥t Ä‘á»“ng bá»™ (async)</h3><p>Khi báº¡n dispatch má»™t tÃ¡c vá»¥ Ä‘áº¿n má»™t queue, báº¡n xÃ¡c Ä‘á»‹nh xem khá»‘i Ä‘Ã³ cháº¡y Ä‘á»“ng bá»™ hay báº¥t Ä‘á»“ng bá»™. CÃ³ má»™t sá»‘ khÃ¡c biá»‡t chÃ­nh giá»¯a hai ká»¹ thuáº­t:</p>
<ul>
<li>PhÆ°Æ¡ng thá»©c Ä‘á»“ng bá»™ tráº£ quyá»n Ä‘iá»u khiá»ƒn cho caller chá»‰ sau khi tÃ¡c vá»¥ hoÃ n thÃ nh trong khi phÆ°Æ¡ng thá»©c báº¥t Ä‘á»“ng bá»™ tráº£ quyá»n Ä‘iá»u khiá»ƒn cho caller ngay láº­p tá»©c.</li>
<li>VÃ¬ cÃ¡c phÆ°Æ¡ng thá»©c báº¥t Ä‘á»“ng bá»™ tráº£ quyá»n Ä‘iá»u khiá»ƒn ngay láº­p tá»©c nÃªn chÃºng khÃ´ng block thread hiá»‡n táº¡i.</li>
<li>LÆ°u Ã½ ráº±ng tá»« â€œÄ‘á»“ng bá»™â€ khÃ´ng cÃ³ nghÄ©a lÃ  chÆ°Æ¡ng trÃ¬nh pháº£i Ä‘á»£i code hoÃ n thÃ nh trÆ°á»›c khi tiáº¿p tá»¥c. NÃ³ chá»‰ cÃ³ nghÄ©a lÃ  concurrent queue sáº½ Ä‘á»£i cho Ä‘áº¿n khi tÃ¡c vá»¥ hoÃ n thÃ nh trÆ°á»›c khi nÃ³ thá»±c thi khá»‘i code tiáº¿p theo trÃªn queue.<br>Code dÆ°á»›i Ä‘Ã¢y minh há»a cÃ¡ch sá»­ dá»¥ng thá»±c thi async vÃ  sync.<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DispatchQueue</span>.global().sync &#123; [<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"A"</span>)</span><br><span class="line">    <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">5</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">DispatchQueue</span>.global().sync &#123; [<span class="number">2</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"B"</span>)</span><br><span class="line">    <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">6</span>...<span class="number">10</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
NÃ³i chung, chÃºng ta khÃ´ng thá»ƒ dá»± Ä‘oÃ¡n output khi cháº¡y code trÃªn vÃ¬ má»—i láº§n cháº¡y chÆ°Æ¡ng trÃ¬nh, nhiá»u output khÃ¡c nhau sáº½ Ä‘Æ°á»£c in ra. ChÃºng ta chá»‰ cÃ³ thá»ƒ nÃ³i ráº±ng â€œBâ€ sáº½ luÃ´n Ä‘Æ°á»£c in sau â€œAâ€ vÃ¬ caller cáº§n Ä‘á»£i khá»‘i [1] tráº£ quyá»n Ä‘iá»u khiá»ƒn Ä‘á»ƒ cÃ³ thá»ƒ thá»±c thi khá»‘i tiáº¿p theo [2].<br>Náº¿u chÃºng ta sá»­a cÃ¡c khá»‘i bÃªn trong thÃ nh <code>sync</code>, chÃºng ta Ä‘áº£m báº£o ráº±ng output sáº½ luÃ´n lÃ  <code>A 0 1 2 3 4 5 B 6 7 8 9 10</code>.<h3 id="Ba-loai-queue-chinh"><a href="#Ba-loai-queue-chinh" class="headerlink" title="Ba loáº¡i queue chÃ­nh"></a>Ba loáº¡i queue chÃ­nh</h3>CÃ³ ba loáº¡i queue chÃ­nh trong GCD:</li>
<li>Main queue: CÃ¡c tÃ¡c vá»¥ Ä‘Æ°á»£c dispatch Ä‘áº¿n queue nÃ y sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn main thread, nÆ¡i cÃ¡c cÃ´ng viá»‡c liÃªn quan Ä‘áº¿n UI Ä‘Æ°á»£c gá»i. <em>Main queue lÃ  má»™t serial queue</em>.</li>
</ul>
<p><em>LÆ°u Ã½ quan trá»ng</em>, phÆ°Æ¡ng thá»©c sync khÃ´ng thá»ƒ Ä‘Æ°á»£c gá»i trÃªn main thread vÃ¬ nÃ³ sáº½ block thread hoÃ n toÃ n vÃ  dáº«n á»©ng dá»¥ng Ä‘áº¿n deadlock. Do Ä‘Ã³, táº¥t cáº£ cÃ¡c tÃ¡c vá»¥ gá»­i Ä‘áº¿n main queue pháº£i Ä‘Æ°á»£c gá»­i báº¥t Ä‘á»“ng bá»™.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    <span class="keyword">let</span> mainQueue = <span class="type">DispatchQueue</span>.main</span><br><span class="line">    mainQueue.sync &#123; <span class="comment">// -&gt; Code nÃ y sáº½ dáº«n Ä‘áº¿n Deadlock</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Inner block called"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/Post-Resources/GCD/Deadlock_On_Main_Queue.png" alt=""></p>
<ul>
<li>Global queues: ChÃºng lÃ  cÃ¡c concurrent queue vÃ  Ä‘Æ°á»£c chia sáº» bá»Ÿi há»‡ thá»‘ng. ChÃºng ta sá»­ dá»¥ng global queue cho báº¥t ká»³ tÃ¡c vá»¥ nÃ o khÃ´ng liÃªn quan Ä‘áº¿n UI. VÃ­ dá»¥, táº£i má»™t hÃ¬nh áº£nh tá»« internet sau Ä‘Ã³ hiá»ƒn thá»‹ nÃ³ cho ngÆ°á»i dÃ¹ng sau khi táº£i xong, láº¥y database tá»« server, v.v.<br>Khi lÃ m viá»‡c vá»›i global queue, chÃºng ta khÃ´ng chá»‰ Ä‘á»‹nh Ä‘á»™ Æ°u tiÃªn mÃ  sá»­ dá»¥ng <em>Quality of Service</em> (QoS) Ä‘á»ƒ giÃºp GCD xÃ¡c Ä‘á»‹nh Ä‘á»™ Æ°u tiÃªn cá»§a cÃ¡c tÃ¡c vá»¥. Äiá»u quan trá»ng cáº§n lÆ°u Ã½ lÃ  cÃ¡c á»©ng dá»¥ng sá»­ dá»¥ng nhiá»u tÃ i nguyÃªn khÃ¡c nhau nhÆ° CPU, bá»™ nhá»›, giao diá»‡n máº¡ng, v.v. Do Ä‘Ã³, chÃºng ta nÃªn chá»n QoS phÃ¹ há»£p cá»§a queue Ä‘á»ƒ duy trÃ¬ kháº£ nÄƒng pháº£n há»“i vÃ  hiá»‡u quáº£ cá»§a á»©ng dá»¥ng. Há»‡ Ä‘iá»u hÃ nh sáº½ dá»±a trÃªn QoS Ä‘Ã£ cho Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh thÃ´ng minh vá» thá»i Ä‘iá»ƒm vÃ  nÆ¡i thá»±c thi chÃºng.<br>CÃ³ bá»‘n loáº¡i QoS:</li>
<li><ul>
<li><em>User-interactive</em>: Äiá»u nÃ y chá»‰ ra ráº±ng cÃ¡c tÃ¡c vá»¥ cáº§n Ä‘Æ°á»£c thá»±c thi ngay láº­p tá»©c Ä‘á»ƒ duy trÃ¬ kháº£ nÄƒng pháº£n há»“i trÃªn UI. ChÃºng ta sá»­ dá»¥ng nÃ³ cho cáº­p nháº­t UI hoáº·c thá»±c hiá»‡n animation.</li>
</ul>
</li>
<li><ul>
<li><em>User-initiated</em>: CÃ´ng viá»‡c mÃ  ngÆ°á»i dÃ¹ng Ä‘Ã£ khá»Ÿi táº¡o vÃ  yÃªu cáº§u káº¿t quáº£ ngay láº­p tá»©c (Trong vÃ i giÃ¢y hoáº·c Ã­t hÆ¡n). ChÃºng ta sá»­ dá»¥ng nÃ³ Ä‘á»ƒ thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng khi ngÆ°á»i dÃ¹ng click vÃ o thá»© gÃ¬ Ä‘Ã³ trong UI.</li>
</ul>
</li>
<li><ul>
<li><em>Utility</em>: CÃ¡c tÃ¡c vá»¥ cÃ³ thá»ƒ máº¥t má»™t thá»i gian Ä‘á»ƒ hoÃ n thÃ nh vÃ  khÃ´ng yÃªu cáº§u káº¿t quáº£ ngay láº­p tá»©c (Máº¥t vÃ i giÃ¢y Ä‘áº¿n vÃ i phÃºt) nhÆ° táº£i dá»¯ liá»‡u.</li>
</ul>
</li>
<li><ul>
<li><em>Background</em>: Äiá»u nÃ y Ä‘áº¡i diá»‡n cho cÃ¡c tÃ¡c vá»¥ mÃ  ngÆ°á»i dÃ¹ng khÃ´ng trá»±c tiáº¿p nháº­n biáº¿t. ThÃ´ng thÆ°á»ng, chÃºng ta sá»­ dá»¥ng nÃ³ Ä‘á»ƒ láº¥y dá»¯ liá»‡u hoáº·c báº¥t ká»³ tÃ¡c vá»¥ nÃ o khÃ´ng yÃªu cáº§u tÆ°Æ¡ng tÃ¡c ngÆ°á»i dÃ¹ng.</li>
</ul>
</li>
<li>Custom queues: Khi báº¡n táº¡o má»™t custom queue, báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh loáº¡i queue Ä‘Ã³ lÃ  gÃ¬ (Serial hoáº·c concurrent). Máº·c Ä‘á»‹nh, chÃºng lÃ  serial queue.</li>
</ul>
<h2 id="Deadlock"><a href="#Deadlock" class="headerlink" title="Deadlock"></a>Deadlock</h2><p>Tá»« <code>Deadlock</code> Ä‘á» cáº­p Ä‘áº¿n má»™t tÃ¬nh huá»‘ng trong Ä‘Ã³ má»™t táº­p cÃ¡c thread khÃ¡c nhau chia sáº» cÃ¹ng má»™t tÃ i nguyÃªn Ä‘ang Ä‘á»£i nhau giáº£i phÃ³ng tÃ i nguyÃªn Ä‘á»ƒ hoÃ n thÃ nh cÃ¡c tÃ¡c vá»¥ cá»§a mÃ¬nh.<br><img src="/Post-Resources/GCD/Deadlock.png" alt=""><br>Khi lÃ m viá»‡c vá»›i GCD, náº¿u chÃºng ta khÃ´ng hiá»ƒu Ä‘áº§y Ä‘á»§ cÃ¡c khÃ¡i niá»‡m cá»§a GCD, chÃºng ta cÃ³ thá»ƒ táº¡o ra deadlock trong code. VÃ­ dá»¥, code dÆ°á»›i Ä‘Ã¢y Ä‘ang táº¡o ra má»™t deadlock.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deadLock</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">let</span> myQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"myLabel"</span>)</span><br><span class="line">	myQueue.async &#123;</span><br><span class="line">	    myQueue.sync &#123;</span><br><span class="line">	        <span class="built_in">print</span>(<span class="string">"Inner block called"</span>)</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"Outer block called"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Äáº§u tiÃªn, chÃºng ta táº¡o má»™t custom queue vá»›i má»™t label nháº¥t Ä‘á»‹nh. Sau Ä‘Ã³, chÃºng ta dispatch báº¥t Ä‘á»“ng bá»™ má»™t khá»‘i code gá»i má»™t khá»‘i code khÃ¡c Ä‘á»“ng bá»™. RÃµ rÃ ng lÃ  khá»‘i bÃªn trong vÃ  khá»‘i bÃªn ngoÃ i Ä‘ang thá»±c thi trÃªn cÃ¹ng má»™t queue. Máº·c Ä‘á»‹nh, má»™t custom queue lÃ  serial nÃªn khá»‘i bÃªn trong sáº½ khÃ´ng báº¯t Ä‘áº§u trÆ°á»›c khi khá»‘i bÃªn ngoÃ i hoÃ n thÃ nh. Máº·t khÃ¡c, khá»‘i bÃªn ngoÃ i khÃ´ng thá»ƒ hoÃ n thÃ nh vÃ¬ khá»‘i bÃªn trong Ä‘ang giá»¯ quyá»n Ä‘iá»u khiá»ƒn cá»§a thread hiá»‡n táº¡i (Äá»“ng bá»™). Do Ä‘Ã³, deadlock xáº£y ra.<br>CÃ³ hai cÃ¡ch Ä‘á»ƒ kháº¯c phá»¥c váº¥n Ä‘á». CÃ¡ch thá»© nháº¥t lÃ  thay Ä‘á»•i loáº¡i queue thÃ nh <code>concurrent</code>. Báº±ng cÃ¡ch nÃ y, chÃºng ta Ä‘áº£m báº£o ráº±ng khá»‘i bÃªn trong khÃ´ng pháº£i Ä‘á»£i khá»‘i bÃªn ngoÃ i hoÃ n thÃ nh Ä‘á»ƒ cÃ³ thá»ƒ báº¯t Ä‘áº§u.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"myLabel"</span>, attributes: .concurrent)</span><br></pre></td></tr></table></figure>
<p>CÃ¡ch thá»© hai lÃ  thay Ä‘á»•i khá»‘i bÃªn trong thÃ nh <code>async</code>. Láº§n nÃ y, khá»‘i bÃªn ngoÃ i sáº½ khÃ´ng Ä‘á»£i khá»‘i bÃªn trong hoÃ n thÃ nh Ä‘á»ƒ cÃ³ thá»ƒ báº¯t Ä‘áº§u.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myQueue.async &#123;</span><br><span class="line">    myQueue.async &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Inner block called"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"outer block called"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CÃ³ má»™t khuyáº¿n nghá»‹ trÃªn tÃ i liá»‡u Apple vá» Deadlock táº¡i <a href="https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW28">chÆ°Æ¡ng Dispatch queues and thread safety</a><br><code>&quot;KhÃ´ng gá»i hÃ m dispatch_sync tá»« má»™t tÃ¡c vá»¥ Ä‘ang thá»±c thi trÃªn cÃ¹ng queue mÃ  báº¡n truyá»n vÃ o lá»i gá»i hÃ m cá»§a báº¡n. LÃ m nhÆ° váº­y sáº½ gÃ¢y deadlock cho queue.
Náº¿u báº¡n cáº§n dispatch Ä‘áº¿n queue hiá»‡n táº¡i, hÃ£y lÃ m nhÆ° váº­y báº¥t Ä‘á»“ng bá»™ báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m dispatch_async.&quot;</code></p>
<h2 id="Livelock"><a href="#Livelock" class="headerlink" title="Livelock"></a>Livelock</h2><p>CÃ³ má»™t khÃ¡i niá»‡m lock khÃ¡c ngoÃ i deadlock gá»i lÃ  <code>Livelock</code>. KhÃ´ng giá»‘ng nhÆ° deadlock, livelock khÃ´ng block thread hiá»‡n táº¡i. ChÃºng chá»‰ khÃ´ng thá»ƒ tiáº¿n triá»ƒn thÃªm. Hoáº·c chÃ­nh xÃ¡c hÆ¡n, livelock lÃ  â€œmá»™t tÃ¬nh huá»‘ng trong Ä‘Ã³ hai hoáº·c nhiá»u process liÃªn tá»¥c thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a chÃºng Ä‘á»ƒ pháº£n há»“i cÃ¡c thay Ä‘á»•i trong (cÃ¡c) process khÃ¡c mÃ  khÃ´ng thá»±c hiá»‡n báº¥t ká»³ cÃ´ng viá»‡c há»¯u Ã­ch nÃ oâ€.<br>CÃ³ má»™t vÃ­ dá»¥ thá»±c táº¿ hay vá» livelock trÃªn <a href="https://stackoverflow.com/questions/1036364/good-example-of-livelock">StackOverflow</a><br><code>Má»™t cáº·p vá»£ chá»“ng Ä‘ang cá»‘ Äƒn sÃºp, nhÆ°ng chá»‰ cÃ³ má»™t chiáº¿c thÃ¬a giá»¯a há». Má»—i ngÆ°á»i Ä‘á»u quÃ¡ lá»‹ch sá»±, vÃ  sáº½ Ä‘Æ°a thÃ¬a náº¿u ngÆ°á»i kia chÆ°a Äƒn.</code><br>CÃ³ cÃ¡c loáº¡i lock khÃ¡c khi chÃºng ta lÃ m viá»‡c vá»›i concurrency nhÆ° bound resources, mutual exclusion, starvation. VÃ¬ pháº¡m vi cá»§a bÃ i viáº¿t nÃ y, tÃ´i sáº½ khÃ´ng giáº£i thÃ­ch táº¥t cáº£ á»Ÿ Ä‘Ã¢y. Vui lÃ²ng tham kháº£o cÃ¡c nguá»“n khÃ¡c Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.</p>
<h2 id="Luu-y-quan-trong"><a href="#Luu-y-quan-trong" class="headerlink" title="LÆ°u Ã½ quan trá»ng"></a>LÆ°u Ã½ quan trá»ng</h2><ul>
<li>TrÃªn iPhone, cÃ¡c hoáº¡t Ä‘á»™ng discretionary vÃ  background, bao gá»“m networking, bá»‹ táº¡m dá»«ng khi báº­t Low Power Mode.</li>
<li>Khi sá»­ dá»¥ng Xcode 9 vá»›i iOS 11, má»™t cáº£nh bÃ¡o sáº½ Ä‘Æ°á»£c phÃ¡t ra khi má»™t Ä‘á»‘i tÆ°á»£ng giao diá»‡n ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c truy cáº­p tá»« má»™t thread khÃ´ng pháº£i main.</li>
<li>Äá»™ Æ°u tiÃªn user interactive nÃªn hiáº¿m trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n. Náº¿u má»i thá»© Ä‘á»u cÃ³ Ä‘á»™ Æ°u tiÃªn cao, thÃ¬ khÃ´ng cÃ³ gÃ¬ lÃ  cao cáº£.</li>
</ul>
<h2 id="Ket-luan"><a href="#Ket-luan" class="headerlink" title="Káº¿t luáº­n"></a>Káº¿t luáº­n</h2><p>Trong bÃ i viáº¿t nÃ y, tÃ´i Ä‘Ã£ cho báº¡n tháº¥y má»™t sá»‘ Ä‘iá»ƒm thÃº vá»‹ vá» GCD trong Swift. Trong bÃ i viáº¿t tiáº¿p theo, chÃºng ta sáº½ tháº£o luáº­n thÃªm vá» cÃ¡c khÃ¡i niá»‡m nÃ¢ng cao khÃ¡c cá»§a láº­p trÃ¬nh Ä‘á»“ng thá»i nhÆ° DispatchGroup, Operation Queue, Group Tasks, v.v. Sau Ä‘Ã³ chÃºng ta sáº½ triá»ƒn khai má»™t dá»± Ã¡n nhá» Ä‘á»ƒ káº¿t há»£p chÃºng láº¡i vá»›i nhau.<br>Náº¿u báº¡n cÃ³ báº¥t ká»³ Ã½ kiáº¿n nÃ o, Ä‘á»«ng ngáº§n ngáº¡i liÃªn há»‡ vá»›i tÃ´i.</p>
<h2 id="Tai-lieu-tham-khao"><a href="#Tai-lieu-tham-khao" class="headerlink" title="TÃ i liá»‡u tham kháº£o"></a>TÃ i liá»‡u tham kháº£o</h2><p>[1] <a href="https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html">TÃ i liá»‡u Apple: Concurrency Programming Guide</a><br>[2] iOS 8 Swift Programming Cookbook cá»§a Oâ€™Reilly, ChÆ°Æ¡ng 7: Concurrency and Multitasking.</p>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/"></a><a class="link-muted mr-2" rel="tag" href="/"></a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5e9474199d6bcc0012d5bba6&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://ko-fi.com/uynguyen" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button is-warning donate" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="uynguyen.itus@gmail.com"><input type="hidden" name="currency_code" value="USD"></form></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://uynguyen.github.io/vi/posts/Grand-Central-Dispatch-in-Swift/index.html';
            this.page.identifier = 'vi/posts/Grand-Central-Dispatch-in-Swift/index.html';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'uynguyen-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen"></figure><p class="title is-size-4 is-block line-height-inherit">Uy Nguyen</p><p class="is-size-6 is-block">Software engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-envelope mr-1"></i><span>uynguyen.itus@gmail.com</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">58</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-rounded" style="background-color:#f14668e3;color:white;font-weight:bold;" href="https://ko-fi.com/uynguyen" target="_blank" rel="noopener">if ğŸ‘ then Buy me a Coffee</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/uynguyen"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://www.linkedin.com/in/uynguyen505"><i class="fab fa-linkedin"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://uynguyen.github.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Uy Nguyen</span></span><span class="level-right"><span class="level-item tag">uynguyen.github.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2025-04-02T11:03:38.000Z">2025-04-02</time></p><p class="title is-6"><a class="link-muted" href="/2025/04/02/Bluetooth-security-Implement-authentication/">Securing Bluetooth Communication: Implementing Authentication and Encryption Flows</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-11-03T03:33:53.000Z">2024-11-03</time></p><p class="title is-6"><a class="link-muted" href="/2024/11/03/iOS-18-What-s-news-in-CoreBluetooth/">iOS 18: What&#039;s news in CoreBluetooth?</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-31T03:38:32.000Z">2024-08-31</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/31/Bluetooth-security-Pairing-and-Bonding/">Bluetooth security: Pairing and Bonding</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-08-04T05:10:39.000Z">2024-08-04</time></p><p class="title is-6"><a class="link-muted" href="/2024/08/04/Android-Bluetooth-A-Pitfall/">Android Bluetooth: A Pitfall</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2024-06-30T03:48:09.000Z">2024-06-30</time></p><p class="title is-6"><a class="link-muted" href="/2024/06/30/Best-practice-iOS-vs-Android-Bluetooth/">Best practice: iOS vs Android Bluetooth</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Appclip/"><span class="tag">Appclip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bluetooth/"><span class="tag">Bluetooth</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Books/"><span class="tag">Books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cocoa/"><span class="tag">Cocoa</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Concurrency/"><span class="tag">Concurrency</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Conference/"><span class="tag">Conference</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Core-Data/"><span class="tag">Core Data</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CoreBluetooh/"><span class="tag">CoreBluetooh</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CrossPlatform/"><span class="tag">CrossPlatform</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Design-Patterns/"><span class="tag">Design Patterns</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DispatchQueue/"><span class="tag">DispatchQueue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Memory-management/"><span class="tag">Memory management</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Notification/"><span class="tag">Notification</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Objective-C/"><span class="tag">Objective-C</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Operations/"><span class="tag">Operations</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReactNative/"><span class="tag">ReactNative</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Architecture/"><span class="tag">Software Architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI/"><span class="tag">UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UIStackView/"><span class="tag">UIStackView</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UML/"><span class="tag">UML</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vendor/"><span class="tag">Vendor</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WatchOS/"><span class="tag">WatchOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web-Bluetooth/"><span class="tag">Web Bluetooth</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/books/"><span class="tag">books</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iBeacon/"><span class="tag">iBeacon</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/study/"><span class="tag">study</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/Post-Resources/UyNguyen.jpg" alt="Uy Nguyen" height="28"></a><p class="size-small"><span>&copy; Uy Nguyen</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("vi");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://uynguyen.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>